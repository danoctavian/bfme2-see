
;-----------------------------------------------------------------------------------------
; Crebain Object
;-----------------------------------------------------------------------------------------
Object Crebain
	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage 		= HICrebain
    SelectPortrait         	= UPCrebain

	Draw = W3DHordeModelDraw ModuleTag_01
		; OkToChangeModelColor = Yes ; temporarily commented out to remove the house color

		WadingParticleSys = EntRipples

		StaticModelLODMode = Yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model					= Crebain_SKN
		End
		
		IdleAnimationState
			StateName				= Idle
			Animation				= IdleA
				AnimationName       = Crebain_SKL.Crebain_IDL
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
			End
			Flags						= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState				= JUST_BUILT
			StateName				= State_JustBuilt
			Animation
				AnimationName		= Crebain_SKL.Crebain_SMNA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End
		
		AnimationState				= DYING DEATH_1				; Killed
			Animation
				AnimationName		= Crebain_SKL.Crebain_SMNB 
				AnimationMode		= ONCE
				AnimationBlendTime	= 15
			End
		End
		
		
		AnimationState				= MOVING
			Animation				= RunA
				AnimationName       = Crebain_SKL.Crebain_MOV
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
;				Distance			= 35
			End
		End

		AnimationState				=	SELECTED
			StateName				=	State_Selected
			Animation				=	AtAttention
				AnimationName		=	Crebain_SKL.Crebain_IDL
				AnimationMode		=	LOOP
				AnimationBlendTime  = 30
			End
		End
		
	End
		
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING DECELERATE
			ParticleSysBone = None GenericSiegeTrailDust
	    End
	    AnimationState = MOVING
	    End
	End
	
	; ***DESIGN parameters ***
	Side			= Neutral
	EditorSorting	= UNIT
	ThreatLevel		= 0.0
	CommandPoints	= 0
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

	VisionRange		= 200.0
	DisplayName		= OBJECT:Crebain
	
	CommandSet		= EmptyCommandSet


	; *** AUDIO Parameters ***

	EvaEnemyObjectSightedEvent = None  ; Don't bother player about this object showing up over their base -- happens too much to bother

	SoundAmbient = CrebainAmbientLoop
	SoundMoveStart = CrebainSelect

	VoiceSelect = CrebainSelect


	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = SELECTABLE NO_COLLIDE MONSTER MOVE_ONLY HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION IGNORES_SELECT_ALL SUMMONED SCORE
	SelectionPriority = SELECTION_PRIORITY_CREBAIN
	
	Body = ActiveBody ModuleTag_02
		MaxHealth         = 1500
		MaxHealthDamaged  = 750
		;RecoveryTime      = 5000
	End

	Behavior = AIUpdateInterface	ModuleTag_AIUpdateInterface
	End

	Behavior = PhysicsBehavior		ModuleTag_PhysicsBehavior
	End
	
	LocomotorSet
		Locomotor = CrebainLocomotor
		Condition = SET_NORMAL 
		Speed     = 200
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
		MinLifetime		= 60000
		MaxLifetime		= 60000
	End	
	

	Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
		StartsActive	= Yes ;If no, requires upgrade to turn on.
		BonusName		= EyeOfSauronFear
		RefreshDelay	= 1000
		Range			= 150.0
		ObjectFilter	= ANY +INFANTRY +CAVALRY
		TargetEnemy		= Yes
		MaxActiveRank	= 1		;Only affects level 1 rank units
	End
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Debuff
		StartsActive	= Yes
		BonusName		= GenericDebuff
		AntiCategory	= LEADERSHIP BUFF
		Range			= 200
		RefreshDelay	= 2000
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE -HERO
		TargetEnemy		= Yes
	End

	; Detects other stealth units
	Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
		DetectionRate		= 500   ; how often to rescan for stealthed things in my sight (msec)
	End

	
	Behavior = SlowDeathBehavior ModuleTag_NormalDeath			; Nuked
		DeathTypes			= ALL
        DeathFlags			= DEATH_1
		DestructionDelay	= 2000
		SinkDelay			= 2000
		;SinkRate			= 0.64								; in Dist/Sec
		Sound = INITIAL SpellGenericUnsummonFasterMS
	End

	Geometry = CYLINDER
	GeometryMajorRadius = 50.0
	GeometryMinorRadius = 50.0
	GeometryHeight		= 61.0
	GeometryIsSmall		= No
	;AttackContactPoint  = X:0 Y:0 Z:60
	AttackContactPoint  = X:40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:40 Z:60
	AttackContactPoint  = X:-40 Y:-40 Z:60
	AttackContactPoint  = X:40 Y:-40 Z:60

    Shadow			= SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX		= 400;
    ShadowSizeY		= 400;
    ShadowTexture	= MUSauronEye;

	ShadowOpacityStart = 0
	ShadowOpacityFadeInTime = 1000
	ShadowOpacityPeak = 255
	ShadowOpacityFadeOutTime = 1000
	ShadowOpacityEnd = 0

	ShadowOverrideLODVisibility = yes
End

;---------------------------------------------------------------------------------------
ObjectReskin WildCaveBats Crebain
	; *** ART Parameters ***

    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage 	   = HICaveBats
    SelectPortrait         = UPBatCloud

	Draw = W3DHordeModelDraw ModuleTag_01
		; OkToChangeModelColor = Yes ; temporarily commented out to remove the house color

		WadingParticleSys = EntRipples

		StaticModelLODMode = Yes ; Will append M or L to the skin name depending on GameLOD

		DefaultModelConditionState
			Model					= Bats_SKN
		End
		
		IdleAnimationState
			StateName				= Idle
			Animation				= IdleA
				AnimationName       = Bats_SKL.Bats_IDLA
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
			End
			Flags						= RANDOMSTART
		End
		
		AnimationState				= JUST_BUILT
			StateName				= State_JustBuilt
			Animation
				AnimationName		= Bats_SKL.Bats_SMNA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
			ParticleSysBone = None BuildingContructDust
			ParticleSysBone = None CrebainSummonChunks
			;ParticleSysBone = None WatcherSummonBlast ; Huge and high water splash!
			;ParticleSysBone = None WatcherSummonBlast2 ; Medium sized, but broad water splash!
			;ParticleSysBone = None WatcherSummonBlast3 ; Big rocks in arc! 
			;ParticleSysBone = None BalrogSummonExplosionChunksSmall ; Big rocks in straight path!
		End
		
		AnimationState				= DYING DEATH_1				; Killed
			Animation
				AnimationName		= Bats_SKL.Bats_SMNB 
				AnimationMode		= ONCE
				AnimationBlendTime	= 15
			End
		End
		
		
		AnimationState				= MOVING
			Animation				= RunA
				AnimationName       = Bats_SKL.Bats_MOV
				AnimationMode       = LOOP
				AnimationBlendTime  = 30
;				Distance			= 35
			End
		End
		

		AnimationState				=	SELECTED
			StateName				=	State_Selected
			Animation				=	AtAttention
				AnimationName		=	Bats_SKL.Bats_IDLA
				AnimationMode		=	LOOP
				AnimationBlendTime  = 30
			End
		End
		
	End

	; *** AUDIO Parameters ***

	SoundAmbient 	= CaveBatsAmbientLoop
	SoundMoveStart 	= CaveBatsSelect
	VoiceSelect 		= CaveBatsSelect
	
	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
      	MaxUpdateRangeCap = 800
		AnimationSound = Sound:CaveBatsSelect			Animation:Bats_SKL.Bats_SMNA	Frames:3
	End

	;--------------
	
	DisplayName = OBJECT:CaveBats
End
