; ####################################################
; "Battle for Middle Earth II - Special Extended Edition - Director's Cut"
; ####################################################

; WildGolfimbul.INI for MORIA (Wild) faction...
; ------------------------------------------------------------------------------
; NOTE: Keep this organized!

Object WildGolfimbul

  ; *** ART Parameters ***
										; New naming system for Beta 4.7!
	ButtonImage	= HIAzogIcon
	SelectPortrait	= HPAzogPortrait
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_Azog
	
  
	Draw = W3DScriptedModelDraw ModuleTag_01

	  OkToChangeModelColor = No
	  
    DefaultModelConditionState
      Model = IUOvrseer_SKN
      Skeleton	= IUOvrseer_SKL
    End
	
    ; Webbed version
    ModelConditionState = STONED
      Model = CUWebdVctm_SKN
      Skeleton = CUWebdVctm_SKL
      ParticleSysBone = None WitchKingPoison
    End

	IdleAnimationState
		Animation = IDLB
	    		AnimationName = IUOvrseer_IDLB
	    		AnimationMode = ONCE
			AnimationPriority = 15
		End
		Animation = IDLC
	    		AnimationName = IUOvrseer_IDLC
	    		AnimationMode = ONCE
			AnimationPriority = 15
		End
		Animation = IDLD
	    		AnimationName = IUOvrseer_IDLD
	    		AnimationMode = ONCE
			AnimationPriority = 15
		End
		StateName = Idle
	End
 
		AnimationState				=	DYING BURNINGDEATH
			Animation
				AnimationName		=	IUOvrseer_DIEA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
			Animation
				AnimationName		=	IUOvrseer_DIEB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
			Animation
				AnimationName		=	IUOvrseer_DIEC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End
		

		AnimationState = DYING
			Animation
				AnimationName       = IUOvrseer_DIEA
				AnimationMode       = ONCE
			End
			Animation
				AnimationName		=	IUOvrseer_DIEB
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
			Animation
				AnimationName		=	IUOvrseer_DIEC
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End
		
		AnimationState				=	BURNINGDEATH
			Animation
				AnimationName		=	IUOvrseer_MFDA
				AnimationMode		=	LOOP
				Distance			=	90
			End
		End

		AnimationState			= DYING SPLATTED
			Animation
				AnimationName	= IUOvrseer_LNDA
				AnimationMode	= ONCE
			End
		End

		AnimationState = FREEFALL
			Animation
				AnimationName = IUOvrseer_FLYA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = IUOvrseer_FLYA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags = RANDOMSTART
		End
		
		AnimationState = STUNNED_STANDING_UP
			Animation
				AnimationName = IUOvrseer_GTPA
				AnimationMode = ONCE
			End
		End		
		
		;-------------------------- Webbed Anims --------------------------------- End
   
    AnimationState = STONED
      StateName = STATE_Idle
      Animation = WIGA ;Medium wiggle
        AnimationName = CUWebdVctm_WIGA
        AnimationMode = ONCE
      End
      Animation = WIGB ;Subtle wiggle
        AnimationName = CUWebdVctm_WIGB
        AnimationMode = ONCE
      End
      Animation = WIGC ;Violent wiggle
        AnimationName = CUWebdVctm_WIGC
        AnimationMode = ONCE
      End
      Flags = RESTART_ANIM_WHEN_COMPLETE
      ;ParticleSysBone     = ROOTTRANSFORM PLACEHOLDER_SpiderWeb FollowBone:no
    End
    
;-------------------------- Webbed Anims --------------------------------- End

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation
				AnimationName = IUOvrseer_RUNB
				AnimationMode = LOOP
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End
		
		AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1		; Fire Bomb attack, added for SEE!
			Animation
				AnimationName = IUOvrseer_ATKB
				AnimationMode = ONCE
			End
			FrameForPristineBonePositions	= 15 //41   						; Should fire at frame 15 of 39!
		End
				
		AnimationState = FIRING_OR_PREATTACK_A
			Animation
				AnimationName = IUOvrseer_ATKA
				AnimationMode = ONCE
			End
			Animation
				AnimationName = IUOvrseer_ATKB
				AnimationMode = ONCE
			End
;			Animation
;				AnimationName = IUOvrseer_ATKC
;				AnimationMode = ONCE
;			End
		End

		AnimationState			= SPECIAL_POWER_1
			Animation			
				AnimationName	= IUOvrseer_SPCA
				AnimationMode   = ONCE
			End
		End

		AnimationState			= SPECIAL_POWER_2
			Animation			
				AnimationName	= IUOvrseer_SPCB
				AnimationMode   = ONCE
			End
		End

		AnimationState = MOVING
			Animation
				AnimationName = IUOvrseer_RUNA
				AnimationMode = LOOP
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = IUOvrseer_HITA
				AnimationMode = ONCE
			End
		End
			
		AnimationState = LEVELED
			Animation = Hit_Level_1_a
				AnimationName = IUOvrseer_LVLA
				AnimationMode = ONCE
			End
		End			
			

		
		AnimationState = EMOTION_CELEBRATING
			Animation
				AnimationName = IUOvrseer_CHRA
				AnimationMode = LOOP
			End
			Animation
				AnimationName = IUOvrseer_CHRB
				AnimationMode = LOOP
			End
		End
		
		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= IUOvrseer_TNTA
				AnimationMode					= ONCE
;				AnimationSpeedFactorRange		= 0.8 1.2
			End
			Animation							= TNTB
				AnimationName					= IUOvrseer_TNTB
				AnimationMode					= ONCE
;				AnimationSpeedFactorRange		= 0.8 1.2
			End
		End

		AnimationState = PACKING_TYPE_2
			Animation
				AnimationName = IUOvrseer_CHRA
				AnimationMode = ONCE
			End
		End

				
		AnimationState = RAISING_FLAG
			Animation
				AnimationName = IUOvrseer_CHRA
				AnimationMode = LOOP
			End
		End

		AnimationState = SELECTED
			Animation
				AnimationName = IUOvrseer_ATNB
				AnimationMode = LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript			
		End
		
    TransitionState = TRANS_Idle_to_Selected
		Animation = ATNA
			AnimationName		= IUOvrseer_ATNA
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    End
    
    TransitionState = TRANS_Selected_to_Idle
		Animation = ATNF
			AnimationName		= IUOvrseer_ATNC
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    End
    		
End
  	; ***DESIGN parameters ***

  	Side 				= Wild
  	CommandPoints 		= 00	
  	EditorSorting 		= UNIT
  	ThingClass 			= CHARACTER_UNIT	
  	ThreatLevel 			= LURTZ_THREAT_LEVEL
  	BuildCost       	= LURTZ_BUILDCOST
  	BuildTime       	= HERO_INITIAL_BUILDTIME
	TransportSlotCount 	= TRANSPORTSLOTCOUNT_HERO
	ShockwaveResistance 	= SHOCKWAVE_RESISTANCE_STRONG	
	BountyValue         	= WILD_GOBLIN_KING_BOUNTY_VALUE

  	MaxSimultaneousOfType = 1  

	;;;;;; WEAPON SETS ;;;;;;	
	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY GoblinKingBlade
		AutoChooseSources 	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions			= WEAPONSET_TOGGLE_1 
		Weapon				= PRIMARY GolfimbulFireBomb
		AutoChooseSources 	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End	
  	
 	ArmorSet
		Conditions    = None
		Armor         = HeroArmor
		DamageFX      = NormalDamageFX
  	End
  
	VisionRange 		= VISION_HERO_STANDARD
	ShroudClearingRange 	= SHROUD_CLEAR_HERO

	DisplayName = OBJECT:WildGolfimbul
	RecruitText	= CONTROLBAR:WildGolfimbulRecruit
	ReviveText	= CONTROLBAR:WildGolfimbulRevive
	Hotkey		= CONTROLBAR:WildGolfimbulHotkey
	CrushableLevel 	= 0  					; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 	= 0 					; What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles

	CommandSet 	= WildGolfimbulCommandSet
 
	; *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Hero
	AutoResolveCombatChain = AutoResolve_HeroCombatChain

	AutoResolveBody = AutoResolve_GoblinKingBody
	
	AutoResolveArmor
		Armor = AutoResolve_GoblinKingArmor
	End

	AutoResolveWeapon
		Weapon = AutoResolve_GoblinKingWeapon
	End
	
	AutoResolveLeadership = AutoResolve_GoblinKingBonus

  	; *** AUDIO Parameters ***;
	VoiceAttack						= OrcFighterVoiceAttackMS					;UrukVoiceAttack		;MordorOrcHordeVoiceAttack
	VoiceAttackCharge				= OrcFighterVoiceAttackCharge				;MordorOrcHordeVoiceAttackCharge
	VoiceAttackStructure				= OrcFighterVoiceAttackBuilding
	VoiceCreated						= OrcFighterVoiceSelectMS ;EVA:OrcHordeCreated
	VoiceFullyCreated 				= OrcFighterVoiceSelectMS ;EVA:OrcHordeCreated
	VoiceGuard						= OrcFighterVoiceMoveMS
	VoiceMove						= OrcFighterVoiceMoveMS					;UrukVoiceMove			;MordorOrcHordeVoiceMove
	VoiceMoveToCamp					= OrcFighterVoiceMoveCamp
	VoicePriority						= 66
	VoiceRetreatToCastle				= OrcFighterVoiceRetreat
	VoiceSelect						= OrcFighterVoiceSelectMS				;UrukVoiceSelect		;MordorOrcHordeVoiceSelect
	VoiceSelectBattle					= OrcFighterVoiceSelectBattle

	VoiceEnterStateAttack				= OrcFighterVoiceEnterStateAttack			;UrukVoiceAttack		;MordorOrcHordeVoiceAttack
 	VoiceEnterStateAttackCharge		= OrcFighterVoiceEnterStateAttackCharge		;MordorOrcHordeVoiceAttackCharge
	VoiceEnterStateAttackStructure		= OrcFighterVoiceEnterStateAttackBuilding
	VoiceEnterStateMove				= OrcFighterVoiceEnterStateMove			;UrukVoiceMove			;MordorOrcHordeVoiceMove
	VoiceEnterStateMoveToCamp		= OrcFighterVoiceEnterStateMoveCamp
	VoiceEnterStateRetreatToCastle		= OrcFighterVoiceEnterStateRetreat
	
	SoundImpact						= ImpactHorse						;UrukDie

	UnitSpecificSounds
		VoiceEnterUnitElvenTransportShip	= HeroOrcVoiceMove
		VoiceEnterUnitMordorMumakil		= HeroOrcVoiceMove
		VoiceEnterUnitSlaughterHouse		= HeroOrcVoiceMove
		VoiceEnterUnitTransportShip			= HeroOrcVoiceMove
		VoiceGarrison						= HeroOrcVoiceMove
		VoiceInitiateCaptureBuilding		= HeroOrcVoiceCaptureBuilding
	End
  
	CrowdResponseKey = Goblin

   	 #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	EvaEventDieOwner			= GothmogDie			;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
	
	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU	;Tie into LargeGroupAudio system
		Key = Hero
	End

	Behavior = StancesBehavior ModuleTag_StancesBehavior
        	StanceTemplate = Hero
    	End

  	; *** ENGINEERING Parameters ***

	RadarPriority = UNIT
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER; URUK ARCHER
	PathfindDiameter = 40.0

  	Body = RespawnBody ModuleTag_RespawnBody
		CheerRadius 			= EMOTION_CHEER_RADIUS
   		MaxHealth         		= WILD_GOBLIN_KING_HEALTH			; BALANCE Gothmog Health
  		PermanentlyKilledByFilter	= NONE				; Who kills me permanently?
   		DodgePercent     		= HERO_DODGE_PERCENT
  	End

	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
		DeathAnim			= DYING ;STUNNED		; Model condition to play when killed-to-respawn
		DeathFX				= FX_LurtzDieToRespawn		; FXList to play when killed-to-respawn
		DeathAnimationTime	= 6033 ; 1133			; How long DeathAnim will take.
		InitialSpawnFX		= FX_LurtzInitialSpawn
		RespawnAnim			= LEVELED			; Animation to play when respawning.
		RespawnFX			= FX_LurtzRespawn		; FXList to play when respawning.
		RespawnAnimationTime		= 2000				; Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		; Respawn at this location -- and at it's exit production point if possible.
		ButtonImage			= HIAzogRecall
	
	;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
	;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =	AutoSpawn:No	Cost:600			Time:90000		Health:100%		;DEFAULT VALUES
		RespawnEntry =	Level:2			Cost:700			Time:90000					;For other levels, only override what is different.
		RespawnEntry =	Level:3			Cost:800			Time:90000
		RespawnEntry =	Level:4			Cost:900			Time:90000
		RespawnEntry =	Level:5			Cost:1000		Time:120000
		RespawnEntry =	Level:6			Cost:1100		Time:120000
		RespawnEntry =	Level:7			Cost:1200		Time:120000
		RespawnEntry =	Level:8			Cost:1300		Time:120000
		RespawnEntry =	Level:9			Cost:1400		Time:120000
		RespawnEntry =	Level:10			Cost:1500		Time:120000
	End

	Behavior = AutoHealBehavior ModuleTag_LurtzHealing
		StartsActive 	= Yes
		HealingAmount 	= HERO_HEAL_AMOUNT
		HealingDelay 		= 1000
		StartHealingDelay 	= HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End 

	#include "..\..\..\includes\CaptureBuilding.inc"

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ;ATTACK_BUILDINGS
		MoodAttackCheckRate			= 500
		AttackPriority				= AttackPriority_Archer
		AILuaEventsList		   		= AragornFunctions
		CanAttackWhileContained		= Yes
	End

	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_EVIL_HERO_SPEED
	End

  	LocomotorSet
  	  Locomotor   = HumanWanderLocomotor
  	  Condition    = SET_WANDER
    	Speed     = 50 //NORMAL_FOOT_SLOW_MEMBER_SPEED
  	End
 
  	Behavior 	= PhysicsBehavior ModuleTag_04
   	 GravityMult 	= 1.0
  	End
 
  	Behavior 	= SlowDeathBehavior ModuleTag_05
  	  DeathTypes 	= ALL 
  	  SinkDelay 	= 6000
  	  SinkRate 	= 1.5     ; in Dist/Sec
  	  DestructionDelay = 11000
  	  Sound 	= INITIAL LurtzVoiceDie
  	End
 
  	Behavior 	= SquishCollide ModuleTag_06
  	  ;nothing
 	End
	
	Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
		; To tweak a Bezier path
		FirstHeight 			= 24  	; Height of Bezier control points above highest intervening terrain
		SecondHeight 		= 24
		FirstPercentIndent 	= 30% 	; Percentage of shot distance control points are placed
		SecondPercentIndent 	= 70%
		TumbleRandomly 		= Yes

		CrushStyle 			= Yes 	; I don't detonate, I just hit
		DieOnImpact 			= Yes
		BounceCount 		= 1   	; When I hit the ground, I'll arc again
		BounceDistance 		= 40 	; this far
		BounceFirstHeight 	= 24  	; Height of Bezier control points above highest intervening terrain
		BounceSecondHeight 	= 24
		BounceFirstPercentIndent = 20% ; Percentage of shot distance control points are placed
		BounceSecondPercentIndent = 80%

		GroundHitFX       	= FX_ThrownRockGroundHit
		GroundBounceFX    	= FX_ThrownRockBounceHit
	End	
	
; ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤ 	
	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
		LevelToGrant	= 10
		MPOnly = Yes ;No
	End
; ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤ 	
	
; ------------------------------------------------------------------------------ LEADERSHIP
	
	 Behavior = AttributeModifierAuraUpdate ModuleTag_HeroLeadership
		StartsActive 	= Yes ;If no, requires upgrade to turn on.
		BonusName 		= GenericHeroLeadership
		RefreshDelay 		= 2500
		Range 			= 200
		ObjectFilter	= WILD_GOLFIMBUL_BUFF_RECIPIENT_OBJECT_FILTER
	End
	
; ------------------------------------------------------------------------------	

	;/////////////////////
	;// AISpecialPowers
	;/////////////////////
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	Behavior = AISpecialPowerUpdate SpecialPowerGiveXPAoE
		CommandButtonName = Command_AzogCracktheWhip
		SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
		SpecialPowerRadius = 30.0
	End
	
	Behavior = AISpecialPowerUpdate SpecialPowerAzogFury
		CommandButtonName = Command_AzogFury
		SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
	End

  	Geometry = CYLINDER
 	GeometryMajorRadius = 8.0
  	GeometryMinorRadius = 8.0
  	GeometryHeight = 19.2
  	GeometryIsSmall = Yes
  	Shadow = SHADOW_DECAL
  	ShadowSizeX = 11;
  	ShadowSizeY = 11;
  	ShadowTexture = ShadowI;

	End
	