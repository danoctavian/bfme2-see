///Well you say? I daresay its a fountain!
;------------------------------------------------------------------------------
;Rohan Well
Object RohanWell

	SelectPortrait = BPRWell
 
  ; *** ART Parameters ***
;  SelectPortrait         = SNReactor_L
;  ButtonImage            = SNReactor
  ;day


  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
	StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD     
    DefaultModelConditionState
      Model = RBWell
    End
    
    
       ;------------ New Build Up States coming soon. 
    ModelConditionState   = AWAITING_CONSTRUCTION 
		Model               = RBWell_A
;		ParticleSysBone	  = NONE BuildingDoughnutCloud
    End
    AnimationState        = AWAITING_CONSTRUCTION
		Animation           =  RBWell_A
			AnimationName     =  RBWell_A.RBWell_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
    End

    ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      Model               = RBWell_A
		ParticleSysBone   = CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
    End
    
    AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
		Animation           = RBWell_A
			AnimationName     = RBWell_A.RBWell_A
			AnimationMode     = MANUAL
			AnimationBlendTime = 0
		End
		Flags				  = START_FRAME_FIRST
		StateName			  = BeingConstructed
		BeginScript
			CurDrawablePlaySound("GondorBarracksBeginConstruction")
		EndScript
    End
    
    ;--damaged building
    
    ModelConditionState  = DAMAGED
      Model         = RBWell_D1
		ParticleSysBone FireSmall01 SmokeBuildingSmall
		ParticleSysBone FireSmall02 SmokeBuildingSmall
    End
    AnimationState = DAMAGED
	EnteringStateFX	= FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = RBWell_D2 
		ParticleSysBone FireSmall01 SmokeBuildingSmall
		ParticleSysBone FireSmall02 SmokeBuildingSmall
		ParticleSysBone FireSmall03 SmokeBuildingSmall
    End
    AnimationState = REALLYDAMAGED
	EnteringStateFX	= FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = RBWell_D2  
       ParticleSysBone SmokeLarge01 SmokeBuildingMedium
    End
    
    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
		Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
		 Model         = None
		ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    
    
  End
  
  ; Draw module just for the heal FX.
	Draw = W3DScriptedModelDraw TheHealEffect
	    ModelConditionState  = NONE
			Model = None
			ParticleSysBone NONE WellHealFX
		End
	    ModelConditionState  = ACTIVELY_BEING_CONSTRUCTED
			Model = None
		End
	End

  PlacementViewAngle  = 0
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RohanWell
  Description 	      = OBJECT:RohanWellDescription
  Side                = Obsolete
	IsTrainable = No
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
 
  BuildCost           = ROHAN_WELL_BUILDCOST				
  BuildTime           = ROHAN_WELL_BUILDTIME				; in seconds
  VisionRange         = ROHAN_WELL_VISIONRANGE				; Shroud clearing distance
  ShroudClearingRange = ROHAN_WELL_SHROUDCLEAR
  BountyValue         = ROHAN_WELL_BOUNTY_VALUE	


			
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    ;DamageFX          = StructureDamageFXNoShake
  End
  
  CommandSet = SellableCommandSet



; For Testing Purposes


; *** AUDIO Parameters ***
	#include "..\Includes\StandardBuildingEvaEvents.inc"

	VoiceSelect		= GondorWellSelect

	SoundOnDamaged		= BuildingLightDamageWood
	SoundOnReallyDamaged	= BuildingHeavyDamageWood
	SoundAmbient		= WaterFountain1AmbientLoop

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End
 

  ; *** ENGINEERING Parameters ***

  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION MP_COUNT_FOR_VICTORY MADE_OF_STONE CAN_SEE_THROUGH_STRUCTURE
 
  Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
    ;WorkerName		  = ""; instead of RohanWorker, the well builds itself
    SelfBuildingLoop = BuildingConstructionLoop ; Only played if we DON'T spawn a worker
	SelfRepairFromDamageLoop  = NoSound         ; This doesn't cause an animation, so don't bother playing a sound
	SelfRepairFromRubbleLoop  = BuildingConstructionLoop
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End 

  CommandSet		    = SellableCommandSet

  Body                      = StructureBody ModuleTag_05
    MaxHealth               = ROHAN_WELL_MAXHEALTH				
    MaxHealthDamaged        = ROHAN_WELL_MAXHEALTHDAMAGED			
  	MaxHealthReallyDamaged  = ROHAN_WELL_MAXHEALTH_REALLYDAMAGED		
  End

	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
	End
 
	Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
		EffectRadius		= 200 ; please update the decal size in experience lvl INI if you change this... the value there is about 2.2x the value here		
		PingDelay		= 2000;msec
		HealPercentPerSecond	= 3%
		AllowFilter		= ANY +INFANTRY +CAVALRY -MACHINE +MONSTER -IMMOBILE    
	End
 

	Behavior = CostModifierUpgrade ModuleTag_CostModifier
		LabelForPalantirString = GUI:WATER_DISCOUNT
		StartsActive = Yes ; Run on build complete, not upgrade
		ObjectFilter		= ANY +RohanPeasantHorde +RohanArcherHorde +RohanElvenWarriorHorde
		Percentage		= -0%
		Percentage		= -20%
		Percentage		= -30%
	End

	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module for Well Object
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate			= 5000							; spawn a new member every n seconds when idle (in miliseconds)		
		UnitSpawnFX				= FX_BannerCarrierSpawnUnit		; name of particle FX to use when the BannerCarrier spawns a new unit		

		; This well object acts like a banner carrier except it spawns unit on nearby hordes instead of itself.
		ReplenishNearbyHorde	= Yes
		ScanHordeDistance		= 200
	End
 
;  Behavior = TransitionDamageFX ModuleTag_15
;    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
;    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ;---------------------------------------------------------------------------------------
;    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
;    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
;    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
;  End
 
 
  Geometry              = CYLINDER
  GeometryMajorRadius   = 35.6
  GeometryHeight        = 16.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  
	GeometryContactPoint	= X:-12.063		Y:30.688	Z:0			Repair
	GeometryContactPoint	= X:26.816		Y:-17.416	Z:0			Repair
	GeometryContactPoint	= X:23.753		Y:22.765	Z:0
	GeometryContactPoint	= X:-27.95		Y:-17.416	Z:0
	GeometryContactPoint	= X:0.007		Y:-0.119	Z:25.696	Swoop

End

