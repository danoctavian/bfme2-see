; ####################################################
; "Battle for Middle Earth II - Special Extended Edition - Director's Cut"
; ####################################################

; GundabadOrcPikeman.INI & GundabadOrcSwordsman for MORIA (Wild) faction...
; ------------------------------------------------------------------------------
; NOTE: Keep this organized!

Object GundabadOrcSwordsman

	ButtonImage = MUOrcsGdbdNew 
	SelectPortrait  =  UPBlackOrcPortrait
  
	Draw = W3DScriptedModelDraw ModuleTag_DRAW

		StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
		OkToChangeModelColor = No
		ExtraPublicBone = arrow
		WadingParticleSys = EntRipples  //Used when the unit is wading in shallow water. Make sure ALL units (inc monsters, machines, etc) has this! (Naz)		
		
		DefaultModelConditionState
			Model               = MUGunSwo
			Skeleton            = CHSS_UK_U_SKL
			WeaponLaunchBone    = PRIMARY B_Hand_R
		End

	IdleAnimationState
		Animation = IDLB
			AnimationName = CHSS_UK_U_IDLB
			AnimationMode = ONCE
			AnimationPriority = 1
		End
		Animation = IDLG
			AnimationName = CHSS_UK_U_IDLA
			AnimationMode = ONCE
			AnimationPriority = 20 ;2
		End
		Flags = RANDOMSTART
		StateName = Idle
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoard") end
		EndScript
	End


	AnimationState						= PASSENGER
		Animation						= Falling
			AnimationName				= CHSS_UK_U_FLYA
			AnimationMode				= LOOP
		End
	End
	
	AnimationState						= FREEFALL
		Animation						= FLYA
			AnimationName				= CHSS_UK_U_FLYA
			AnimationMode				= LOOP
			AnimationSpeedFactorRange	= 0.5	0.5
			AnimationBlendTime			= 5
		End
	End
	
	AnimationState			= STUNNED_FLAILING
		Animation           = StunFlail
			AnimationName   = CHSS_UK_U_FLYA
			AnimationMode   = LOOP
			AnimationSpeedFactorRange	= 0.4 0.6
		End
		Flags						= MAINTAIN_FRAME_ACROSS_STATES2
	End

	AnimationState			= DYING BURNINGDEATH
		Animation
			AnimationName	= CHSS_UK_U_DIEA
			AnimationMode	= ONCE
			AnimationBlendTime = 10
		End
		Animation
			AnimationName	= CHSS_UK_U_DIEB
			AnimationMode	= ONCE
			AnimationBlendTime = 20
		End
	End

	AnimationState			= DYING SPLATTED
		Animation			= Splat
			AnimationName	= CHSS_UK_U_LNDA
			AnimationMode	= ONCE
		End
	End

    AnimationState = DYING
		Animation = DIEA
			AnimationName = CHSS_UK_U_DIEA
		    AnimationMode = ONCE
		End
		Animation = DIEB
			AnimationName = CHSS_UK_U_DIEB
		    AnimationMode = ONCE
		End
    End    

	AnimationState			= BURNINGDEATH
		Animation
			AnimationName	= CHSS_UK_U_MFDA
			AnimationMode	= LOOP
			Distance		= 50
		End
	End

	AnimationState						= PARALYZED
		Animation
			AnimationName				= CHSS_UK_U_IDLA
			AnimationMode				= LOOP
		End
	End


	AnimationState        = STUNNED
		Animation           = LNDA
			AnimationName     = CHSS_UK_U_LNDA
			AnimationMode     = ONCE
		End
	End

	AnimationState        = STUNNED_STANDING_UP
		Animation           = GTPA
			AnimationName     = CHSS_UK_U_GTPA
			AnimationMode     = ONCE
			AnimationSpeedFactorRange = 1.5 1.5
		End
	End	
		
	AnimationState        = THROWN_PROJECTILE
		Animation           = FLYA
			AnimationName     = CHSS_UK_U_FLYA
			AnimationMode     = LOOP
		End
	End
	
    AnimationState = FIRING_OR_PREATTACK_A
		Animation = ATKA
			AnimationName = CHSS_UK_U_ATKA
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation = ATKC
			AnimationName = CHSS_UK_U_ATKC
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
		Animation = ATKB
			AnimationName = CHSS_UK_U_ATKB
			AnimationMode = ONCE
			UseWeaponTiming		= Yes
		End
    End

   

    AnimationState = MOVING FIRING_OR_PREATTACK_A
		Animation = TrotAndFire
			AnimationName = CHSS_UK_U_ATRA
		    AnimationMode = LOOP
		End
		Flags = RANDOMSTART
    End
    
	
	AnimationState = MOVING CLIMBING BACKING_UP
		Animation = Climbing_Down
			AnimationName = CHSS_UK_U_CLMA
			AnimationMode = LOOP_BACKWARDS
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

    AnimationState = MOVING CLIMBING
		Animation = Climbing_Up
			AnimationName = CHSS_UK_U_CLMA
			AnimationMode = LOOP
			AnimationSpeedFactorRange = 2.0 2.0
		End
    End

	AnimationState = MOVING EMOTION_TERROR
		Animation = TERRORIZED
			AnimationName = CHSS_UK_U_RUNC
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
	End
     
    AnimationState = MOVING BACKING_UP
		Animation = BackingUp
			AnimationName = CHSS_UK_U_BAKA
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
	End

;
    AnimationState = MOVING ALTERNATE_FORMATION
		Animation = Moving
			AnimationName = CHSS_UK_U_SPCA
		    AnimationMode = LOOP
		    Distance		= 25
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
    End
    AnimationState = MOVING
		Animation = Moving
			AnimationName = CHSS_UK_U_RUNA
		    AnimationMode = LOOP
		End
		Flags = RANDOMSTART
		ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = WAR_CHANT
		Animation = Chant
			AnimationName = CHSS_UK_U_TNTA
			AnimationMode = LOOP
		End
		Animation = Chant
			AnimationName = CHSS_UK_U_TNTB
			AnimationMode = LOOP
		End
		Flags = RANDOMSTART
	End
    
    AnimationState							= EMOTION_UNCONTROLLABLY_AFRAID
		Animation							= FERA
			AnimationName					= CHSS_UK_U_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
    End
         
    AnimationState							= EMOTION_AFRAID
		Animation							= FERA
			AnimationName					= CHSS_UK_U_FERA
			AnimationMode					= LOOP
		End
		Flags = RANDOMSTART
    End
    
    AnimationState = BETWEEN_FIRING_SHOTS_A
		Animation = Wait
			AnimationName = CHSS_UK_U_IDLA
			AnimationMode = ONCE
		End
	End

     AnimationState = ATTACKING
		Animation = IdleAllAttacksComeFrom
			AnimationName = CHSS_UK_U_IDLA
			AnimationMode = LOOP
		End
	End

	AnimationState							= EMOTION_TAUNTING
		Animation							= TNTA
			AnimationName					= CHSS_UK_U_TNTA
			AnimationMode					= LOOP
			AnimationBlendTime				= 10
		End
		Animation							= TNTB
			AnimationName					= CHSS_UK_U_TNTB
			AnimationMode					= LOOP
			AnimationBlendTime				= 10
		End
		Flags								= RANDOMSTART
	End
	
	AnimationState							= EMOTION_POINTING
		Animation							= Pointing1
			AnimationName					= CHSS_UK_U_PNTA
			AnimationMode					= LOOP
		End
		Flags								= RANDOMSTART
	End
	
	AnimationState							= EMOTION_CELEBRATING
		Animation							= CHRA
			AnimationName					= CHSS_UK_U_LVLA
			AnimationMode					= ONCE
			AnimationBlendTime				= 10
		End
		Flags				= RESTART_ANIM_WHEN_COMPLETE
	End
	
	AnimationState							= EMOTION_ALERT
		Animation							= ALERT
			AnimationName					= CHSS_UK_U_IDLA
			AnimationMode					= LOOP
		End
		Flags								= RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
	End


	AnimationState		= RAISING_FLAG
		Animation
			AnimationName = CHSS_UK_U_LVLA
			AnimationMode = ONCE
		End
		Flags = RESTART_ANIM_WHEN_COMPLETE
	End

	AnimationState        = SELECTED
		StateName           = STATE_Selected
		Animation           = ATNB
			AnimationName     = CHSS_UK_U_ATNB
			AnimationMode     = LOOP
		End
		BeginScript
			Prev = CurDrawablePrevAnimationState()
			if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
		EndScript
	End

	TransitionState       = TRANS_IdleToSelected
		Animation           = ATNA
			AnimationName     = CHSS_UK_U_ATNA
			AnimationMode     = ONCE
			AnimationSpeedFactorRange = 0.9 1.0
		End
	End

	TransitionState       = TRANS_SelectedToGuard
		Animation           = ATNB
			AnimationName     = CHSS_UK_U_ATNB
			AnimationMode     = ONCE
			AnimationSpeedFactorRange = 0.9 1.0
		End
	End
		
	TransitionState		= TRANS_SelectedToBoard
		Animation			= ATNC
			AnimationName	= CHSS_UK_U_ATNC
			AnimationMode	= ONCE
			AnimationSpeedFactorRange = 0.9 1.0
		End
	End
  	
	
	AnimationState WEAPONSET_PLAYER_UPGRADE
		Animation = IDLA
			AnimationName = CHSS_UK_U_IDLA
			AnimationMode = LOOP
		End
		StateName	= Idle
		Flags		= RANDOMSTART
	End
	
    AnimationState = ALTERNATE_FORMATION
		Animation = IDLB
			AnimationName = CHSS_UK_U_IDLA
			AnimationMode = LOOP
			AnimationPriority = 20
		End
    End

  End
  



    #include "..\..\..\includes\StunDrawModuleSmall.inc"

	; ***DESIGN parameters ***
	Side 				= Wild
	EditorSorting 		= UNIT
	ThreatLevel 			= 1.0
	ThingClass			= HORDE_UNIT
	CommandPoints 		= 1 				; originally 3
	TransportSlotCount 	= TRANSPORTSLOTCOUNT_UNIT
	EmotionRange 		= 240

  	VisionRange 		= MORDOR_BLACKORC_VISION_RANGE
  	ShroudClearingRange 	= SHROUD_CLEAR_STANDARD
	BountyValue 			= MORDOR_BLACKORC_BOUNTY_VALUE
	DisplayName 		= OBJECT:GundabadOrcSwordsman
	CrushableLevel 		= 0  				; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 			= 0 				; What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	CrushRevengeWeapon 	= BasicInfantryCrushRevenge
	CommandSet 			= MordorFighterCommandSet
  
	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY    AngmarSword
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions			= PLAYER_UPGRADE
		Weapon				= PRIMARY	AngmarSwordUpgraded
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End

	ArmorSet
		Conditions	= None
		Armor		= SoldierEliteArmor
		DamageFX	= NormalDamageFX
	End
	ArmorSet 
		Conditions	= PLAYER_UPGRADE
		Armor		= SoldierEliteHeavyArmor
		DamageFX	= NormalDamageFX
	End


	; *** AUDIO Parameters ***;

	VoiceAttack					= BlackOrcVoiceAttack		;UrukVoiceAttack		;MordorOrcHordeVoiceAttack
	VoiceAttackCharge			= BlackOrcVoiceAttackCharge			;MordorOrcHordeVoiceAttackCharge
	VoiceAttackStructure			= BlackOrcVoiceAttackBuilding
	VoiceCreated					= BlackOrcVoiceSelect
	VoiceFullyCreated 			= BlackOrcVoiceSelect
	VoiceGuard					= BlackOrcVoiceMove
	VoiceMove					= BlackOrcVoiceMove				;UrukVoiceMove			;MordorOrcHordeVoiceMove
	VoiceMoveToCamp				= BlackOrcVoiceMoveCamp
	VoicePriority					= 15
	VoiceRetreatToCastle			= BlackOrcVoiceRetreat
	VoiceSelect					= BlackOrcVoiceSelect		;UrukVoiceSelect		;MordorOrcHordeVoiceSelect
	VoiceSelectBattle				= BlackOrcVoiceSelectBattle

	VoiceEnterStateAttack			= BlackOrcVoiceAttack		;UrukVoiceAttack		;MordorOrcHordeVoiceAttack
 	VoiceEnterStateAttackCharge	= BlackOrcVoiceAttackCharge		;MordorOrcHordeVoiceAttackCharge
	VoiceEnterStateAttackStructure	= BlackOrcVoiceAttackBuilding
	VoiceEnterStateMove			= BlackOrcVoiceMove			;UrukVoiceMove			;MordorOrcHordeVoiceMove
	VoiceEnterStateMoveToCamp	= BlackOrcVoiceMoveCamp
	VoiceEnterStateRetreatToCastle	= BlackOrcVoiceRetreat
	
	SoundImpact					= ImpactHorse					;UrukDie

	UnitSpecificSounds
		VoiceGarrison						= BlackOrcVoiceMoveGarr
		VoiceEnterUnitMordorMumakil		= BlackOrcVoiceMoveGarr
		VoiceEnterUnitSlaughterHouse		= BlackOrcVoiceMoveGarr
		VoiceEnterUnitEvilMenTransportShip	= BlackOrcVoiceMove
		VoiceInitiateCaptureBuilding			= BlackOrcVoiceCaptureBuilding
	End

	CrowdResponseKey = Orc

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
	;EvaEventDieOwner = GroupOrcHordeDie							; Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths
												; For deaths you can respawn from, use the DeathFX

	Behavior 	= LargeGroupAudioUpdate ModuleTag_LGAU		  			; Tie into LargeGroupAudio system
		Key 	= Orc_Infantry Orc_Swordman
	End

	ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
		ModelCondition = Required:RAISING_FLAG			Excluded:DYING ENGAGED	Sound:EmotionOrcCompilationVoxTauntSinglesLoop
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallOrc			Animation:CHSS_UK_U_DIEA		Frames:18
		AnimationSound = Sound:BodyFallOrc			Animation:CHSS_UK_U_DIEB		Frames:30
		AnimationSound = Sound:BodyFallOrc			Animation:CHSS_UK_U_DIEC		Frames:28
		AnimationSound = Sound:BodyFallGeneric2	Animation:CHSS_UK_U_DIEG		Frames:115
		AnimationSound = Sound:BodyFallOrc			Animation:CHSS_UK_U_LNDA	Frames:2
		AnimationSound = Sound:BodyFallGeneric2	Animation:CHSS_UK_U_LNDA	Frames:37
	End


  ; *** ENGINEERING Parameters ***

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT ORC GRAB_AND_DROP
 
	Body = ActiveBody ModuleTag_02
		CheerRadius 	  		= EMOTION_CHEER_RADIUS
		MaxHealth         	= MORDOR_BLACKORC_HEALTH
		MaxHealthDamaged  	= MORDOR_BLACKORC_HEALTH_DAMAGED
		BurningDeathBehavior 	= Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
 
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle		= Yes
    MoodAttackCheckRate			= 20
	AILuaEventsList			= GundabadOrcFunctions
    MaxCowerTime			= 10000
    MinCowerTime			= 3000
    AttackPriority			= AttackPriority_Infantry
	BurningDeathTime		= BURNINGDEATH_DURATION_INFANTRY
  End
  
; ------------------------------------------------------------------------------
  
	LocomotorSet
		Locomotor	= HumanLocomotor
		Condition		= SET_NORMAL
		Speed		= NORMAL_FOOT_MED_MEMBER_SPEED
	End

	LocomotorSet
		Locomotor 	= BurningDeathLocomotorInfantry
		Condition 	= SET_BURNINGDEATH
		Speed	  	= BURNINGDEATH_WANDERSPEED_INFANTRY
	End
	
; ------------------------------------------------------------------------------

	Behavior = FlammableUpdate ModuleTag_BurningDeathPromotor
		AflameDuration		= TROOP_AFLAME_DURATION			// If I catch fire, I'll burn for this long...
		AflameDamageAmount	= TROOP_AFLAME_DAMAGE_AMOUNT		// taking this much damage...
		AflameDamageDelay	= TROOP_AFLAME_DAMAGE_DELAY		// this often.
		FlameDamageLimit		= TROOP_FLAME_DAMAGE_LIMIT
		FlameDamageExpiration	= TROOP_FLAME_DAMAGE_EXPIRATION
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_SDB1
		DeathTypes 		= ALL -KNOCKBACK -NORMAL
		SinkDelay		= BURNINGDEATH_SINKDELAY_HUMANIOD
		SinkRate			= BURNINGDEATH_SINKRATE_HUMANIOD
		DestructionDelay	= BURNINGDEATH_DESTRUCTIONDELAY_HUMANIOD
		Sound = INITIAL OrcVoiceDie
	End
 
	Behavior = SquishCollide ModuleTag_SC
	;nothing
	End

	Behavior = HordeMemberCollide ModuleTag_HMC
	;nothing
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SDB2
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes 		= NONE +KNOCKBACK
		SinkDelay		= BURNINGDEATH_SINKDELAY_HUMANIOD
		SinkRate			= BURNINGDEATH_SINKRATE_HUMANIOD
		DestructionDelay	= BURNINGDEATH_DESTRUCTIONDELAY_HUMANIOD
		Sound = INITIAL OrcVoiceDie
	End	
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult 			= 1.0
		ShockStunnedTimeLow	= 1400	;msec
		ShockStunnedTimeHigh	= 2400	;msec
		ShockStandingTime	= 933	;msec
	End	
 
; ------------------------------------------------------------------------------  
//  BezierProjectileBehavior is new in RotWK!
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight				= 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight				= 24
    FirstPercentIndent			= 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent		= 70%
    TumbleRandomly			= Yes

    CrushStyle				= Yes ; I don't detonate, I just hit
    DieOnImpact				= Yes
    BounceCount				= 1   ; When I hit the ground, I'll arc again
    BounceDistance			= 40 ; this far
    BounceFirstHeight			= 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight		= 24
    BounceFirstPercentIndent 	= 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX		= FX_ThrownRockGroundHit
    GroundBounceFX	= FX_ThrownRockBounceHit
  End
  
	#include "..\..\..\..\SEE_includes\GiantBirdDroppingHumanBody_SEE.inc"   
	
; ------------------------------------------------------------------------------ SCAVENGED ARMOR
	Behavior = ArmorUpgrade ArmorUpgradeModuleTag
		TriggeredBy			= Upgrade_WildHeavyArmor
		ArmorSetFlag			= PLAYER_UPGRADE
	End
	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy			= Upgrade_WildHeavyArmor
		;UpgradeTexture		= WUMaraud_C.tga 0 WUMaraud_HA.tga
		;RecolorHouse		= Yes
		ExcludeSubobjects		= Forged_Blade
	End

; ------------------------------------------------------------------------------ FORGED BLADES
	Behavior = WeaponSetUpgrade WeaponSetUpgradeForgedBlades
		TriggeredBy = Upgrade_WildForgedBlades
	End
	; Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
		; TriggeredBy		= Upgrade_WildForgedBlades
		; ShowSubObjects	= Forged_Blade
	; End

	; Behavior = StatusBitsUpgrade ForgedBlades_UpgradeDetection
		; TriggeredBy		= Upgrade_WildForgedBlades
	; End	
 
	Geometry = CYLINDER
	GeometryMajorRadius = 8	    ; reduced this from 10.0 to 8.5 in order to decrease collision
	GeometryMinorRadius = 8	    ; count between fighters in hordes
	GeometryHeight = 19.2
	GeometryIsSmall = No

    Shadow = SHADOW_DECAL
    ShadowSizeX = 21;
    ShadowSizeY = 21;
    ShadowTexture = ShadowI;
End

//------------------------------------------------------------------------------
ChildObject GundabadOrcSwordsman_Summoned GundabadOrcSwordsman
	IsTrainable = No
	CommandPoints = 0
	EquivalentTo = GundabadOrcSwordsman
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
	// This one does the work, but the one in the horde displays the timer
		MinLifetime		= CREATE_A_HERO_REINFORCEMENT_LIFETIME
		MaxLifetime		= CREATE_A_HERO_REINFORCEMENT_LIFETIME
		DeathType		= FADED
	End	
	Behavior = SlowDeathBehavior ModuleTag_FadeDeath
		DeathTypes		= NONE +FADED
		FadeDelay		= 0
		FadeTime		= 5000
		DestructionDelay	= 5000
        DeathFlags		= DEATH_2
		Sound 			= INITIAL SpellGenericUnsummonFasterMS
	End	
End
