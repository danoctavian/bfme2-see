; ####################################################
; "Battle for Middle Earth II - Special Extended Edition - Director's Cut"
; ####################################################

; GoblinArcher.INI for MORIA (Wild) faction...
; ------------------------------------------------------------------------------
; NOTE: Keep this organized!


Object GoblinArcher ; (Creating this Warrior will randomize between several variations!)

	ButtonImage = WOR_GoblinArcher // BCFarm_Peasants
	SelectPortrait = UPWild_GoblinArcher //UPRohan_Peasant

  Draw = W3DHordeModelDraw ModuleTag_01  ;W3DScriptedModelDraw
    DefaultModelConditionState
		Model 		= MUBowGob_SKN
		Skeleton 	= MUGobArch_SKL
    End
  End

  ;***** IMPORTANT NOTE! *******************************************************************	
  ;Certain Upgrades and costs may need to be propagated from here. One example was veterancy overlays.
  ;*****************************************************************************************	

  Side = Wild
  EditorSorting = UNIT
  BuildVariations = GoblinArcher1 GoblinArcher2 GoblinArcher3
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP
  
  ;Shadow = SHADOW_DECAL
  ;ShadowSizeX = 24;
  ;ShadowSizeY = 24;
  ;ShadowTexture = ShadowI;

End


Object GoblinArcher1
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = WOR_GoblinArcher
  SelectPortrait =  UPWild_GoblinArcher
  UpgradeCameo1 = Upgrade_FireArrows
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor 	= No //Yes ;In SEE we don't want factions colors on units! 
	StaticModelLODMode 		= Yes 
	
		LodOptions							= LOW
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_LOW
		End
		LodOptions							= MEDIUM
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_MED
		End
		LodOptions							= HIGH
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_HIGH
		End

		WadingParticleSys = WaterRipplesTrail  //Used when the unit is wading in shallow water. Make sure ALL units (inc monsters, machines, etc) has this! (Naz)

    RandomTexture = MUGobArch.tga 0 MUGobArch.tga
    ; RandomTexture = MUGobArch2.tga 0 MUGobArch.tga
    ; RandomTexture = MUGobArch3.tga 0 MUGobArch.tga

    DefaultModelConditionState
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      WeaponLaunchBone = PRIMARY ARRROW
      WeaponLaunchBone = TERTIARY ARRROW
      WeaponLaunchBone = QUINARY ARRROW
    End
    
    ModelConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = MUBowGob_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End

    ModelConditionState = PREATTACK_E ;USER_6
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End
	
    ModelConditionState = USER_2
      Model               = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton			= MUGobArch_SKL
      ParticleSysBone		= ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    ;;//=================== ANIMATIONS ==================================================================
    ;//Wall climbing/rapelling
    AnimationState = CLIMBING
      StateName = STATE_Climbing
      Animation = Climbing
        AnimationName = MUGobArch_WALB
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
        ;if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
      EndScript
    End
    TransitionState = Trans_RunningToClimbing
      Animation = Transition
        AnimationName = MUGobArch_WALA
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_RappellingToClimbing
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE_BACKWARDS
    ;	End
    ;End
    AnimationState = RAPPELLING
      StateName = STATE_Rappelling
      Animation = Rapelling
        AnimationName = MUGobArch_WALE
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
        ;if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
      EndScript
    End
    TransitionState = Trans_RunningToRappelling
      Animation = Transition
        AnimationName = MUGobArch_WALD
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_ClimbingToRappelling
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE
    ;	End
    ;End

;;------------------- FLYING & DYING --------------------------------------------------------------
;;======= FLYING

    AnimationState = PASSENGER
      Animation = Wiggling
        AnimationName = MUGobArch_FLLA
        AnimationMode = LOOP
      End
    End
    
    AnimationState = THROWN_PROJECTILE
      Animation = Thrown
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
      End
    End
    
    AnimationState = FREEFALL
      Animation = Falling
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.5	0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
    End
    
    AnimationState = STUNNED_FLAILING
      Animation = flying
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = ready_for_sweet_landing
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = flying
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Flags = RANDOMSTART
    End
    
    AnimationState = DYING BURNINGDEATH
      Animation
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName	= MUGobArch_DIEC
        AnimationMode	= ONCE
        AnimationBlendTime = 10
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
    End

    AnimationState = DYING SPLATTED
      Animation = splat
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      EnteringStateFX = FX_HumanBodyGroundHit_SEE ;FX_OrcHitGround
    End
    
    ;;======= DYING

    AnimationState = DYING AFLAME
      Animation = Flaming_Death
        AnimationName = MUGobArch_MFDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
      End

      AnimationState = DYING
      Animation = Dying_1
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
      End
      Animation = Dying_2
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
      End
      Animation = Dying_3
        AnimationName = MUGobArch_DIEC
        AnimationMode = ONCE
      End
      Animation = landb
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      Animation = landc
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      BeginScript
        Preva = CurDrawablePrevAnimation()
        if Preva == "ready_for_sweet_landing" then return "landc" 
        elseif Preva == "flying" then return "landb"
        elseif GetClientRandomNumberReal(0,1) > 0.50 then return "Dying_1"
        else return "Dying_2" end
      EndScript
      End
    
    AnimationState = BURNINGDEATH
      Animation
        AnimationName = MUGobArch_MFDA
        AnimationMode = LOOP
        Distance = 25
      End
      Flags = RANDOMSTART
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    End
  
    AnimationState = STUNNED_STANDING_UP
      Animation = standing_back_up
        AnimationName = MUGobArch_GTPA
        AnimationMode = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
      End
      Animation = already_up
        AnimationName = MUGobArch_IDLA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "sweet_landing" then return "already_up" else return "standing_back_up" end
      EndScript
    End
    
    AnimationState = STUNNED
      Animation = splattered_on_ground
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      Animation = sweet_landing
        AnimationName = MUGobArch_LNDA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "ready_for_sweet_landing" then return "sweet_landing" else return "splattered_on_ground" end
      EndScript
    End
    
    ;AnimationState = BURNINGDEATH //Moved UP! ^
    ;	Animation
    ;		AnimationName	= MUGobArch_MFDA
    ;		AnimationMode	= LOOP
    ;		Distance		= 25
    ;	End
  ;		Flags	= RANDOMSTART
  ;		ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
  ;		ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    ;End

    AnimationState = PARALYZED
      Animation
        AnimationName = MUGobArch_IDLA
        AnimationMode = LOOP
      End
    End



;;------------------------ MOVING --------------------------------------------------------------------

    AnimationState = MOVING BACKING_UP
      Animation = BackingUp
        AnimationName = MUGobArch_BAKA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp2
        AnimationName = MUGobArch_BAKB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp3
        AnimationName = MUGobArch_BAKC
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags = RANDOMSTART
    End
      
    AnimationState = MOVING EMOTION_TERROR
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = RAISING_FLAG
      Animation = CHRA
        AnimationName = MUGobArch_CHRA
        AnimationMode = LOOP
      End
    End


    AnimationState = MOVING
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
      BeginScript ;script to set transition into moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
        if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
      EndScript
    End

      TransitionState = Trans_ClimbingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALC
        AnimationMode = ONCE
      End
    End
    TransitionState = Trans_RappellingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALF
        AnimationMode = ONCE
      End
    End
      
;;------------------- ATTACKING --------------------------------------------------------------------
   
    AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_CLOSE_RANGE
      Animation = ATKB
        AnimationName = MUGobArch_ATKB
        AnimationMode = ONCE
        UseWeaponTiming = Yes
      End
      ; FrameForPristineBonePositions	= 21
    End
    
    ; AnimationState = FIRING_OR_PREATTACK_A
      ; Animation = ATKA
        ; AnimationName = MUGobArch_ATKA
        ; AnimationMode = LOOP
        ; UseWeaponTiming = Yes
      ; End
      ; FrameForPristineBonePositions	= 21
    ; End

    AnimationState = PREATTACK_A USER_2
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    AnimationState = PREATTACK_A 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_E 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_A USER_2
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End
    
    AnimationState = FIRING_OR_RELOADING_A 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    AnimationState = FIRING_OR_RELOADING_E 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_C
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_C
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    
    AnimationState	= SPECIAL_WEAPON_ONE
      Animation			= ATKA
        AnimationName	= MUGobArch_ATKA
        AnimationMode	= ONCE
      End
      FrameForPristineBonePositions	= 17
    End


;-------- Persistant firing (keep bow drawn ) ------------
    AnimationState						= CONTINUOUS_FIRE_MEAN
      Animation						= HangFrameWhileCoasting
        AnimationName				= MUGobArch_ATKF2
        AnimationMode				= MANUAL
      End
    End

    AnimationState						= CONTINUOUS_FIRE_SLOW
      Animation						= put_bow_away
        AnimationName				= MUGobArch_ATKF3
        AnimationMode				= Once
      End
    End
    
    
    ; --------- Click and Hit Reactions ------------
    AnimationState = HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = MUGobArch_HITA
        AnimationMode = ONCE
      End
    End
     
;;------------------------ EMOTIONS ----------------------------------------------------
   
    AnimationState						= WAR_CHANT
      Animation						= Chant
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState						= EMOTION_AFRAID
      Animation						= FERA
        AnimationName				= MUGobArch_FERA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART
    End
    AnimationState						= EMOTION_TAUNTING
      Animation						= TNTA
        AnimationName				= MUGobArch_TNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTB
        AnimationName				= MUGobArch_TNTB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTC
        AnimationName				= MUGobArch_TNTC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_POINTING
      Animation						= Pointing1
        AnimationName				= MUGobArch_PNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_CELEBRATING
      Animation						= CHRA
        AnimationName				= MUGobArch_CHRA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_ALERT
      Animation						= Alert
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
      End
    End
    
 ;;------------------ SELECTED STATE --------------------------------------------------------

    AnimationState = SELECTED USER_4
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState = SELECTED
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    

    ; --- transition states --- ;
    
    TransitionState = Trans_Down_To_Up
      Animation = Transition1
        AnimationName = MUGobArch_ATNA
        AnimationMode = ONCE
      End
      Animation = Transition2
        AnimationName = MUGobArch_ATNA2
        AnimationMode = ONCE
      End
    End
      
    TransitionState = Trans_Up_To_Down
      Animation = Transition
        AnimationName = MUGobArch_ATNC
        AnimationMode = ONCE
      End
    End
    
    
//------------------ IDLE STATE (DISGUISED AS ORC)------------------------------------------------------------
    AnimationState		= USER_4
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript			
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    IdleAnimationState
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
      EndScript			
    End  
  End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"

  ; ***DESIGN parameters ***
  Side = Wild
  IsTrainable = Yes
  EditorSorting = UNIT
  ThreatLevel = 1.0
  ThingClass = HORDE_UNIT
  CommandPoints = 1
  EquivalentTo = GoblinArcher
  TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
  
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GoblinArcherBow
    Weapon = TERTIARY GoblinArcherBowBombard
    Weapon = QUINARY GoblinArcherBowFire_SEE ;GoblinArcherPoisonArrows
    AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
    AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT				; Not AI.
  End
  WeaponSet
    Conditions = CLOSE_RANGE CONTESTING_BUILDING
    Weapon = PRIMARY	GoblinArcherBow
    Weapon = SECONDARY	GoblinArcherBowMelee
    Weapon = TERTIARY  GoblinArcherBowBombard
    Weapon = QUINARY	GoblinArcherBowFire_SEE ;GoblinArcherPoisonArrows
    OnlyAgainst = PRIMARY STRUCTURE
    AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
    AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT				; Not AI.
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY GoblinArcherBowFire_SEE
    Weapon = TERTIARY GoblinArcherBowBombardFire_SEE
    Weapon = QUINARY GoblinArcherPoisonArrows
    AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
    AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT				; Not AI.
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CLOSE_RANGE CONTESTING_BUILDING
    Weapon = PRIMARY GoblinArcherBowFire_SEE
    Weapon = SECONDARY GoblinArcherBowMelee
    Weapon = TERTIARY  GoblinArcherBowBombardFire_SEE
    OnlyAgainst = PRIMARY STRUCTURE
    AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
  End
  
  ArmorSet
    Conditions = None
    Armor = GoblinArcherArmor
    DamageFX = NormalDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor = WildArcherScavengedArmor
    DamageFX = NormalDamageFX
  End
  
  VisionRange = GOBLIN_ARCHER_VISION_RANGE
  ShroudClearingRange = SHROUD_CLEAR_STANDARD
  
  VisionSide = 35%
  VisionRear = 25%
  
  MaxVisionBonusPercent = 300%
  VisionBonusTestRadius = 200
  VisionBonusPercentPerFoot = 1.0%
  
  DisplayName = OBJECT:GoblinArcher
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CrusherLevel = 0 ;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
  CrushRevengeWeapon = RangedInfantryCrushRevenge
  BountyValue = GOBLIN_ARCHER_BOUNTY_VALUE
  CommandSet = GoblinArcherCommandSet

  ; *** AUDIO Parameters ***;

  VoiceAttack = GoblinArcherVoiceAttack
  VoiceAttackCharge = GoblinArcherVoiceAttackCharge
  VoiceAttackMachine = GoblinArcherVoiceAttack
  VoiceAttackStructure = GoblinArcherVoiceAttackBuilding
  VoiceCreated = EVA:GoblinArcherCreated
  VoiceFullyCreated = EVA:GoblinArcherCreated
  VoiceGuard = GoblinArcherVoiceGuard
  VoiceMove = GoblinArcherVoiceMove
  VoiceMoveOverWalls = GoblinArcherVoiceMoveWalls
  VoiceMoveToCamp = GoblinArcherVoiceMoveCamp
  VoiceMoveToHigherGround = GoblinArcherVoiceMoveHighGround
  VoiceMoveWhileAttacking = GoblinArcherVoiceDisengage
  VoicePriority = 35
  VoiceRetreatToCastle = GoblinArcherVoiceRetreat
  VoiceSelect = GoblinArcherVoiceSelectMS
  VoiceSelectBattle = GoblinArcherVoiceSelectBattle

  VoiceEnterStateAttack = GoblinArcherVoiceEnterStateAttack
  VoiceEnterStateAttackCharge = GoblinArcherVoiceEnterStateAttackCharge
  VoiceEnterStateAttackMachine = GoblinArcherVoiceEnterStateAttack
  VoiceEnterStateAttackStructure = GoblinArcherVoiceEnterStateAttackBuilding
  VoiceEnterStateMove = GoblinArcherVoiceEnterStateMove
  VoiceEnterStateMoveOverWalls = GoblinArcherVoiceEnterStateMoveWalls
  VoiceEnterStateMoveToCamp = GoblinArcherVoiceEnterStateMoveCamp
  VoiceEnterStateMoveToHigherGround = GoblinArcherVoiceEnterStateMoveHighGround
  VoiceEnterStateMoveWhileAttacking = GoblinArcherVoiceEnterStateDisengage
  
  
  SoundImpact = ImpactHorse

  UnitSpecificSounds
    VoiceEnterUnitEvilMenTransportShip = GoblinArcherVoiceMoveShip
    VoiceEnterUnitMordorMumakil = GoblinArcherVoiceMoveGarrison
    VoiceEnterUnitSlaughterHouse = GoblinArcherVoiceMoveGarrison
    VoiceGarrison = GoblinArcherVoiceMoveGarrison
    VoiceInitiateCaptureBuilding = GoblinArcherVoiceCaptureBuilding
    VoiceInitiatePoisonArrowAttack = GoblinArcherVoiceAttack
  End

  CrowdResponseKey = Goblin

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

  ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
    ;ModelCondition = Required:EMOTION_CELEBRATING Excluded:DYING ENGAGED	Sound:EmotionGoblinCompilationVoxCheerSinglesLoop	;MOVING ATTACKING 
    ;ModelCondition = Required:EMOTION_TAUNTING Excluded:DYING ENGAGED	Sound:EmotionGoblinCompilationVoxTauntSinglesLoop	;MOVING ATTACKING
    ModelCondition = Required:RAISING_FLAG Excluded:DYING ENGAGED	Sound:EmotionGoblinCompilationVoxCheerSinglesLoop
  End

  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
    MaxUpdateRangeCap = 800
    AnimationSound = Sound:ArrowDrawBow Animation:MUGobArch_SKL.MUGobArch_ATKF2 	Frames:29 
    AnimationSound = Sound:BodyFallGeneric2 Animation:MUGobArch_SKL.MUGobArch_DIEA		Frames:10
    AnimationSound = Sound:BodyFallGeneric2 Animation:MUGobArch_SKL.MUGobArch_DIEB		Frames:7
    AnimationSound = Sound:BodyFallGeneric2 Animation:MUGOBARCH_SKL.MUGOBARCH_DIEC		Frames:10
    AnimationSound = Sound:BodyFallOrc Animation:MUGobArch_SKL.MUGobArch_LNDB		Frames:5
    AnimationSound = Sound:BodyFallOrc Animation:MUGobArch_SKL.MUGobArch_LNDC		Frames:2
  End

  Behavior = LargeGroupAudioUpdate ModuleTag_LGAU				;Tie into LargeGroupAudio system
    Key = Goblin_Archer
  End

  ; *** ENGINEERING Parameters ***
  

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ARCHER GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT CAN_CLIMB_WALLS ORC
 
  Body = ActiveBody ModuleTag_02
    MaxHealth = GOBLIN_ARCHER_HEALTH
    MaxHealthDamaged = GOBLIN_ARCHER_HEALTH_DAMAGED
    BurningDeathBehavior = Yes
    BurningDeathFX = FX_InfantryBurningFlame
  End
  
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    CanAttackWhileContained = Yes
    AILuaEventsList = GoblinArcherFunctions ;WildGoblinArcherFunctions ;MordorFighterFunctions    
    AttackPriority = AttackPriority_Archer
    BurningDeathTime = BURNINGDEATH_DURATION_INFANTRY
  End

  LocomotorSet
    Locomotor = TestWallScalingHordeLocomotor
    Condition = SET_NORMAL
    Speed = NORMAL_WILD_FAST_MEMBER_SPEED
  End

  LocomotorSet
    Locomotor = BurningDeathLocomotorInfantry
    Condition = SET_BURNINGDEATH
    Speed = BURNINGDEATH_WANDERSPEED_INFANTRY
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStandingTime = 2000	;msec
  End
 
  Behavior = FlammableUpdate ModuleTag_BurningDeathPromotor
    AflameDuration = TROOP_AFLAME_DURATION	// If I catch fire, I'll burn for this long...
    AflameDamageAmount = TROOP_AFLAME_DAMAGE_AMOUNT			// taking this much damage...
    AflameDamageDelay = TROOP_AFLAME_DAMAGE_DELAY		// this often.
    FlameDamageLimit = TROOP_FLAME_DAMAGE_LIMIT
    FlameDamageExpiration = TROOP_FLAME_DAMAGE_EXPIRATION
  End
  
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK -NORMAL
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL GoblinVoxDieMS
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End
  
  Behavior = HordeMemberCollide ModuleTag_HMC
    ;nothing
  End
 
  Behavior = SlowDeathBehavior ModuleTag_07
    ; Same as normal death, but no sound (sound already played by SoundImpact = ... )
    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40     ; in Dist/Sec
    DestructionDelay = 15000
    Sound = INITIAL GoblinVoxDieMS
  End
 
  #include "..\..\..\..\SEE_includes\GiantBirdDroppingHumanBody_SEE.inc"

  ;-------------------------Units Upgrades----------------------------------
  ; Scavenged Armor upgrade
  Behavior = ArmorUpgrade WildModuleArmorUpgrade
    TriggeredBy = Upgrade_WildHeavyArmor
    ;ArmorSetFlag =	PLAYER_UPGRADE
  End
  
  Behavior = SubObjectsUpgrade Armor_Upgrade
    TriggeredBy = Upgrade_WildHeavyArmor
    UpgradeTexture = MUGobArch.tga MUGobArch_HA.tga
    ; UpgradeTexture = MUGobArch.tga 0 MUGobArch2_HA.tga
    ; UpgradeTexture = MUGobArch.tga 0 MUGobArch3_HA.tga
    RecolorHouse = Yes
    ExcludeSubobjects = FireArowTip
  End
  
  Behavior = ModelConditionUpgrade ModuleTag_SetVenomFlag
    TriggeredBy = Upgrade_WildSpiderVenomSacks
    AddConditionFlags = USER_2
    Permanent = Yes
  End
  
  Behavior = WeaponSetUpgrade ModuleTag_FireArrows
    TriggeredBy = Upgrade_WildFireArrows
    ; ConflictsWith = Upgrade_RaiseShield
  End

  Behavior = SubObjectsUpgrade ModuleTag_FireArrowSwapUpgrade
    TriggeredBy = Upgrade_WildFireArrows
    ShowSubObjects = FireArowTip
  End	
  
  ; Behavior = StatusBitsUpgrade ModuleTag_VenomArrows
    ; TriggeredBy = Upgrade_WildSpiderVenomSacks
  ; End
  
  // Switch arrows being displayed.
  ; Behavior = WeaponSetUpgrade ModuleTag_FireArrows
    ; TriggeredBy = Upgrade_PlantShield
    ; ConflictsWith = Upgrade_RaiseShield
  ; End
  ; Behavior = ModelConditionUpgrade ModuleTag_SetMountFlag
    ; TriggeredBy = Upgrade_PlantShield
    ; AddConditionFlags = MOUNTED
    ; Permanent = Yes
  ; End
  ; Behavior = ModelConditionUpgrade ModuleTag_RemoveMountedFlag
    ; TriggeredBy = Upgrade_RaiseShield
    ; RemoveConditionFlags = MOUNTED
    ; Permanent = Yes
  ; End
  ; Behavior = SubObjectsUpgrade ModuleTag_FireArrowSwapUpgrade
    ; TriggeredBy = Upgrade_PlantShield
    ; ShowSubObjects	= FireArowTip
  ; End	
  ; Behavior = SubObjectsUpgrade ModuleTag_FireArrowHideUpgrade
    ; TriggeredBy = Upgrade_RaiseShield
    ; HideSubObjects = FireArowTip
  ; End	

  Behavior = DualWeaponBehavior ModuleTag_10
    SwitchWeaponOnCloseRangeDistance = 20
  End
  
  ; Behavior = SpecialPowerModule ModuleTag_FireArrowsStarter
    ; SpecialPowerTemplate = SpecialAbilityUseFireArrows_SEE
    ; UpdateModuleStartsAttack	= Yes
    ; // InitiateSound = DwarfGuardianBullRushMS
    ; SetModelCondition = ModelConditionState:USER_1
    ; SetModelConditionTime = 2.0
  ; End
  ; Behavior = SpecialAbilityUpdate ModuleTag_ModuleTag_FireArrowsUpdate
    ; SpecialPowerTemplate = SpecialAbilityUseFireArrows_SEE
    ; // StartAbilityRange = 200.0 ;//Negative distances will cause the unit to overshoot the destination.
    ; TriggerAttributeModifier = UsingFireArrows_SEE
    ; UnpackTime = 100 
    ; PackTime = 100
    ; AttributeModifierDuration = 30000
    ; // IgnoreFacingCheck = Yes
  ; End
  
  
  Geometry = CYLINDER
  GeometryMajorRadius	= 8.0
  GeometryMinorRadius	= 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 11
  ShadowSizeY = 11
  ShadowTexture = ShadowI
End

ChildObject GoblinArcher2 GoblinArcher1
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = WOR_GoblinArcher
  SelectPortrait =  UPWild_GoblinArcher
  UpgradeCameo1 = Upgrade_FireArrows
  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
      
    ; StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    ; specify options for static LODs
    LodOptions = LOW
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_LOW
      MaxRandomTextures = MAX_RANDOM_TEXTURES_LOW
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_LOW
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_LOW
    End
    
    LodOptions = MEDIUM
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_MED
      MaxRandomTextures = MAX_RANDOM_TEXTURES_MED
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_MED
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_MED
    End
    
    LodOptions = HIGH
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_HIGH
      MaxRandomTextures = MAX_RANDOM_TEXTURES_HIGH
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_HIGH
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_HIGH
    End

    WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.

    ; RandomTexture = MUGobArch.tga 0 MUGobArch.tga
    RandomTexture = MUGobArch2.tga 0 MUGobArch.tga
    ; RandomTexture = MUGobArch3.tga 0 MUGobArch.tga

    DefaultModelConditionState
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      WeaponLaunchBone = PRIMARY ARRROW
      WeaponLaunchBone = TERTIARY ARRROW
      WeaponLaunchBone = QUINARY ARRROW
    End
    
    ModelConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = MUBowGob_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End

    ModelConditionState = PREATTACK_E ;USER_6
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End

    ModelConditionState = USER_2
      Model               = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton			= MUGobArch_SKL
      ParticleSysBone		= ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    ;;//=================== ANIMATIONS ==================================================================
    ;//Wall climbing/rapelling
    AnimationState = CLIMBING
      StateName = STATE_Climbing
      Animation = Climbing
        AnimationName = MUGobArch_WALB
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
        ;if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
      EndScript
    End
    TransitionState = Trans_RunningToClimbing
      Animation = Transition
        AnimationName = MUGobArch_WALA
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_RappellingToClimbing
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE_BACKWARDS
    ;	End
    ;End
    AnimationState = RAPPELLING
      StateName = STATE_Rappelling
      Animation = Rapelling
        AnimationName = MUGobArch_WALE
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
        ;if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
      EndScript
    End
    TransitionState = Trans_RunningToRappelling
      Animation = Transition
        AnimationName = MUGobArch_WALD
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_ClimbingToRappelling
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE
    ;	End
    ;End

;;------------------- FLYING & DYING --------------------------------------------------------------
;;======= FLYING

    AnimationState = PASSENGER
      Animation = Wiggling
        AnimationName = MUGobArch_FLLA
        AnimationMode = LOOP
      End
    End
    
    AnimationState = THROWN_PROJECTILE
      Animation = Thrown
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
      End
    End
    
    AnimationState = FREEFALL
      Animation = Falling
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.5	0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
    End
    
    AnimationState = STUNNED_FLAILING
      Animation = flying
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = ready_for_sweet_landing
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = flying
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Flags = RANDOMSTART
    End
    
    AnimationState = DYING BURNINGDEATH
      Animation
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName	= MUGobArch_DIEC
        AnimationMode	= ONCE
        AnimationBlendTime = 10
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
    End

    AnimationState = DYING SPLATTED
      Animation = splat
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      EnteringStateFX = FX_HumanBodyGroundHit_SEE ;FX_OrcHitGround
    End
    
    ;;======= DYING

    AnimationState = DYING AFLAME
      Animation = Flaming_Death
        AnimationName = MUGobArch_MFDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
      End

      AnimationState = DYING
      Animation = Dying_1
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
      End
      Animation = Dying_2
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
      End
      Animation = Dying_3
        AnimationName = MUGobArch_DIEC
        AnimationMode = ONCE
      End
      Animation = landb
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      Animation = landc
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      BeginScript
        Preva = CurDrawablePrevAnimation()
        if Preva == "ready_for_sweet_landing" then return "landc" 
        elseif Preva == "flying" then return "landb"
        elseif GetClientRandomNumberReal(0,1) > 0.50 then return "Dying_1"
        else return "Dying_2" end
      EndScript
      End
    
    AnimationState = BURNINGDEATH
      Animation
        AnimationName = MUGobArch_MFDA
        AnimationMode = LOOP
        Distance = 25
      End
      Flags = RANDOMSTART
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    End
  
    AnimationState = STUNNED_STANDING_UP
      Animation = standing_back_up
        AnimationName = MUGobArch_GTPA
        AnimationMode = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
      End
      Animation = already_up
        AnimationName = MUGobArch_IDLA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "sweet_landing" then return "already_up" else return "standing_back_up" end
      EndScript
    End
    
    AnimationState = STUNNED
      Animation = splattered_on_ground
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      Animation = sweet_landing
        AnimationName = MUGobArch_LNDA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "ready_for_sweet_landing" then return "sweet_landing" else return "splattered_on_ground" end
      EndScript
    End
    
    ;AnimationState = BURNINGDEATH //Moved UP! ^
    ;	Animation
    ;		AnimationName	= MUGobArch_MFDA
    ;		AnimationMode	= LOOP
    ;		Distance		= 25
    ;	End
  ;		Flags	= RANDOMSTART
  ;		ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
  ;		ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    ;End

    AnimationState = PARALYZED
      Animation
        AnimationName = MUGobArch_IDLA
        AnimationMode = LOOP
      End
    End



;;------------------------ MOVING --------------------------------------------------------------------

    AnimationState = MOVING BACKING_UP
      Animation = BackingUp
        AnimationName = MUGobArch_BAKA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp2
        AnimationName = MUGobArch_BAKB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp3
        AnimationName = MUGobArch_BAKC
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags = RANDOMSTART
    End
      
    AnimationState = MOVING EMOTION_TERROR
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = RAISING_FLAG
      Animation = CHRA
        AnimationName = MUGobArch_CHRA
        AnimationMode = LOOP
      End
    End


    AnimationState = MOVING
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
      BeginScript ;script to set transition into moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
        if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
      EndScript
    End

      TransitionState = Trans_ClimbingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALC
        AnimationMode = ONCE
      End
    End
    TransitionState = Trans_RappellingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALF
        AnimationMode = ONCE
      End
    End
      
;;------------------- ATTACKING --------------------------------------------------------------------
   
    AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_CLOSE_RANGE
      Animation = ATKB
        AnimationName = MUGobArch_ATKB
        AnimationMode = ONCE
        UseWeaponTiming = Yes
      End
      ; FrameForPristineBonePositions	= 21
    End
    
    ; AnimationState = FIRING_OR_PREATTACK_A
      ; Animation = ATKA
        ; AnimationName = MUGobArch_ATKA
        ; AnimationMode = LOOP
        ; UseWeaponTiming = Yes
      ; End
      ; FrameForPristineBonePositions	= 21
    ; End

    AnimationState = PREATTACK_A USER_2
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    AnimationState = PREATTACK_A 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_E 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_A USER_2
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End
    
    AnimationState = FIRING_OR_RELOADING_A 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    AnimationState = FIRING_OR_RELOADING_E 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_C
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_C
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    
    AnimationState	= SPECIAL_WEAPON_ONE
      Animation			= ATKA
        AnimationName	= MUGobArch_ATKA
        AnimationMode	= ONCE
      End
      FrameForPristineBonePositions	= 17
    End


;-------- Persistant firing (keep bow drawn ) ------------
    AnimationState						= CONTINUOUS_FIRE_MEAN
      Animation						= HangFrameWhileCoasting
        AnimationName				= MUGobArch_ATKF2
        AnimationMode				= MANUAL
      End
    End

    AnimationState						= CONTINUOUS_FIRE_SLOW
      Animation						= put_bow_away
        AnimationName				= MUGobArch_ATKF3
        AnimationMode				= Once
      End
    End
    
    
    ; --------- Click and Hit Reactions ------------
    AnimationState = HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = MUGobArch_HITA
        AnimationMode = ONCE
      End
    End
     
;;------------------------ EMOTIONS ----------------------------------------------------
   
    AnimationState						= WAR_CHANT
      Animation						= Chant
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState						= EMOTION_AFRAID
      Animation						= FERA
        AnimationName				= MUGobArch_FERA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART
    End
    AnimationState						= EMOTION_TAUNTING
      Animation						= TNTA
        AnimationName				= MUGobArch_TNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTB
        AnimationName				= MUGobArch_TNTB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTC
        AnimationName				= MUGobArch_TNTC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_POINTING
      Animation						= Pointing1
        AnimationName				= MUGobArch_PNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_CELEBRATING
      Animation						= CHRA
        AnimationName				= MUGobArch_CHRA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_ALERT
      Animation						= Alert
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
      End
    End
    
 ;;------------------ SELECTED STATE --------------------------------------------------------

    AnimationState = SELECTED USER_4
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState = SELECTED
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    

    ; --- transition states --- ;
    
    TransitionState = Trans_Down_To_Up
      Animation = Transition1
        AnimationName = MUGobArch_ATNA
        AnimationMode = ONCE
      End
      Animation = Transition2
        AnimationName = MUGobArch_ATNA2
        AnimationMode = ONCE
      End
    End
      
    TransitionState = Trans_Up_To_Down
      Animation = Transition
        AnimationName = MUGobArch_ATNC
        AnimationMode = ONCE
      End
    End
    
    
//------------------ IDLE STATE (DISGUISED AS ORC)------------------------------------------------------------
    AnimationState		= USER_4
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript			
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    IdleAnimationState
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
      EndScript			
    End  
  End

  EquivalentTo = GoblinArcher
  
  Behavior = SubObjectsUpgrade Armor_Upgrade
    TriggeredBy = Upgrade_WildHeavyArmor
    ; UpgradeTexture = MUGobArch.tga 0 MUGobArch_HA.tga
    UpgradeTexture = MUGobArch.tga 0 MUGobArch2_HA.tga
    ; UpgradeTexture = MUGobArch.tga 0 MUGobArch3_HA.tga
    RecolorHouse = Yes
    ExcludeSubobjects = FireArowTip
  End
  
End


ChildObject GoblinArcher3 GoblinArcher1
  ; *** ART Parameters ***

  ; This is required for garrisoned objects - please put in all objects.
  ButtonImage = WOR_GoblinArcher
  SelectPortrait =  UPWild_GoblinArcher
  UpgradeCameo1 = Upgrade_FireArrows
  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
      
    ; StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    ; specify options for static LODs
    LodOptions = LOW
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_LOW
      MaxRandomTextures = MAX_RANDOM_TEXTURES_LOW
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_LOW
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_LOW
    End
    
    LodOptions = MEDIUM
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_MED
      MaxRandomTextures = MAX_RANDOM_TEXTURES_MED
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_MED
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_MED
    End
    
    LodOptions = HIGH
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_HIGH
      MaxRandomTextures = MAX_RANDOM_TEXTURES_HIGH
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_HIGH
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_HIGH
    End

    WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.

    ; RandomTexture = MUGobArch.tga 0 MUGobArch.tga
    ; RandomTexture = MUGobArch2.tga 0 MUGobArch.tga
    RandomTexture = MUGobArch3.tga 0 MUGobArch.tga

    DefaultModelConditionState
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      WeaponLaunchBone = PRIMARY ARRROW
      WeaponLaunchBone = TERTIARY ARRROW
      WeaponLaunchBone = QUINARY ARRROW
    End
    
    ModelConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = MUBowGob_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End

    ModelConditionState = PREATTACK_E ;USER_6
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End
	
	ModelConditionState = USER_2
      Model               = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton			= MUGobArch_SKL
      ParticleSysBone		= ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    ;;//=================== ANIMATIONS ==================================================================
    ;//Wall climbing/rapelling
    AnimationState = CLIMBING
      StateName = STATE_Climbing
      Animation = Climbing
        AnimationName = MUGobArch_WALB
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
        ;if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
      EndScript
    End
    TransitionState = Trans_RunningToClimbing
      Animation = Transition
        AnimationName = MUGobArch_WALA
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_RappellingToClimbing
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE_BACKWARDS
    ;	End
    ;End
    AnimationState = RAPPELLING
      StateName = STATE_Rappelling
      Animation = Rapelling
        AnimationName = MUGobArch_WALE
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
        ;if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
      EndScript
    End
    TransitionState = Trans_RunningToRappelling
      Animation = Transition
        AnimationName = MUGobArch_WALD
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_ClimbingToRappelling
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE
    ;	End
    ;End

;;------------------- FLYING & DYING --------------------------------------------------------------
;;======= FLYING

    AnimationState = PASSENGER
      Animation = Wiggling
        AnimationName = MUGobArch_FLLA
        AnimationMode = LOOP
      End
    End
    
    AnimationState = THROWN_PROJECTILE
      Animation = Thrown
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
      End
    End
    
    AnimationState = FREEFALL
      Animation = Falling
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.5	0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
    End
    
    AnimationState = STUNNED_FLAILING
      Animation = flying
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = ready_for_sweet_landing
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = flying
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Flags = RANDOMSTART
    End
    
    AnimationState = DYING BURNINGDEATH
      Animation
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName	= MUGobArch_DIEC
        AnimationMode	= ONCE
        AnimationBlendTime = 10
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
    End

    AnimationState = DYING SPLATTED
      Animation = splat
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      EnteringStateFX = FX_HumanBodyGroundHit_SEE ;FX_OrcHitGround
    End
    
    ;;======= DYING

    AnimationState = DYING AFLAME
      Animation = Flaming_Death
        AnimationName = MUGobArch_MFDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
      End

      AnimationState = DYING
      Animation = Dying_1
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
      End
      Animation = Dying_2
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
      End
      Animation = Dying_3
        AnimationName = MUGobArch_DIEC
        AnimationMode = ONCE
      End
      Animation = landb
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      Animation = landc
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      BeginScript
        Preva = CurDrawablePrevAnimation()
        if Preva == "ready_for_sweet_landing" then return "landc" 
        elseif Preva == "flying" then return "landb"
        elseif GetClientRandomNumberReal(0,1) > 0.50 then return "Dying_1"
        else return "Dying_2" end
      EndScript
      End
    
    AnimationState = BURNINGDEATH
      Animation
        AnimationName = MUGobArch_MFDA
        AnimationMode = LOOP
        Distance = 25
      End
      Flags = RANDOMSTART
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    End
  
    AnimationState = STUNNED_STANDING_UP
      Animation = standing_back_up
        AnimationName = MUGobArch_GTPA
        AnimationMode = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
      End
      Animation = already_up
        AnimationName = MUGobArch_IDLA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "sweet_landing" then return "already_up" else return "standing_back_up" end
      EndScript
    End
    
    AnimationState = STUNNED
      Animation = splattered_on_ground
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      Animation = sweet_landing
        AnimationName = MUGobArch_LNDA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "ready_for_sweet_landing" then return "sweet_landing" else return "splattered_on_ground" end
      EndScript
    End
    
    ;AnimationState = BURNINGDEATH //Moved UP! ^
    ;	Animation
    ;		AnimationName	= MUGobArch_MFDA
    ;		AnimationMode	= LOOP
    ;		Distance		= 25
    ;	End
  ;		Flags	= RANDOMSTART
  ;		ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
  ;		ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    ;End

    AnimationState = PARALYZED
      Animation
        AnimationName = MUGobArch_IDLA
        AnimationMode = LOOP
      End
    End



;;------------------------ MOVING --------------------------------------------------------------------

    AnimationState = MOVING BACKING_UP
      Animation = BackingUp
        AnimationName = MUGobArch_BAKA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp2
        AnimationName = MUGobArch_BAKB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp3
        AnimationName = MUGobArch_BAKC
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags = RANDOMSTART
    End
      
    AnimationState = MOVING EMOTION_TERROR
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = RAISING_FLAG
      Animation = CHRA
        AnimationName = MUGobArch_CHRA
        AnimationMode = LOOP
      End
    End


    AnimationState = MOVING
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
      BeginScript ;script to set transition into moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
        if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
      EndScript
    End

      TransitionState = Trans_ClimbingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALC
        AnimationMode = ONCE
      End
    End
    TransitionState = Trans_RappellingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALF
        AnimationMode = ONCE
      End
    End
      
;;------------------- ATTACKING --------------------------------------------------------------------
   
    AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_CLOSE_RANGE
      Animation = ATKB
        AnimationName = MUGobArch_ATKB
        AnimationMode = ONCE
        UseWeaponTiming = Yes
      End
      ; FrameForPristineBonePositions	= 21
    End
    
    ; AnimationState = FIRING_OR_PREATTACK_A
      ; Animation = ATKA
        ; AnimationName = MUGobArch_ATKA
        ; AnimationMode = LOOP
        ; UseWeaponTiming = Yes
      ; End
      ; FrameForPristineBonePositions	= 21
    ; End

    AnimationState = PREATTACK_A USER_2
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    AnimationState = PREATTACK_A 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_E 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_A USER_2
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End
    
    AnimationState = FIRING_OR_RELOADING_A 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    AnimationState = FIRING_OR_RELOADING_E 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_C
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_C
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    
    AnimationState	= SPECIAL_WEAPON_ONE
      Animation			= ATKA
        AnimationName	= MUGobArch_ATKA
        AnimationMode	= ONCE
      End
      FrameForPristineBonePositions	= 17
    End


;-------- Persistant firing (keep bow drawn ) ------------
    AnimationState						= CONTINUOUS_FIRE_MEAN
      Animation						= HangFrameWhileCoasting
        AnimationName				= MUGobArch_ATKF2
        AnimationMode				= MANUAL
      End
    End

    AnimationState						= CONTINUOUS_FIRE_SLOW
      Animation						= put_bow_away
        AnimationName				= MUGobArch_ATKF3
        AnimationMode				= Once
      End
    End
    
    
    ; --------- Click and Hit Reactions ------------
    AnimationState = HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = MUGobArch_HITA
        AnimationMode = ONCE
      End
    End
     
;;------------------------ EMOTIONS ----------------------------------------------------
   
    AnimationState						= WAR_CHANT
      Animation						= Chant
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState						= EMOTION_AFRAID
      Animation						= FERA
        AnimationName				= MUGobArch_FERA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART
    End
    AnimationState						= EMOTION_TAUNTING
      Animation						= TNTA
        AnimationName				= MUGobArch_TNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTB
        AnimationName				= MUGobArch_TNTB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTC
        AnimationName				= MUGobArch_TNTC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_POINTING
      Animation						= Pointing1
        AnimationName				= MUGobArch_PNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_CELEBRATING
      Animation						= CHRA
        AnimationName				= MUGobArch_CHRA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_ALERT
      Animation						= Alert
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
      End
    End
    
 ;;------------------ SELECTED STATE --------------------------------------------------------

    AnimationState = SELECTED USER_4
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState = SELECTED
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    

    ; --- transition states --- ;
    
    TransitionState = Trans_Down_To_Up
      Animation = Transition1
        AnimationName = MUGobArch_ATNA
        AnimationMode = ONCE
      End
      Animation = Transition2
        AnimationName = MUGobArch_ATNA2
        AnimationMode = ONCE
      End
    End
      
    TransitionState = Trans_Up_To_Down
      Animation = Transition
        AnimationName = MUGobArch_ATNC
        AnimationMode = ONCE
      End
    End
    
    
//------------------ IDLE STATE (DISGUISED AS ORC)------------------------------------------------------------
    AnimationState		= USER_4
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript			
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    IdleAnimationState
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
      EndScript			
    End  
  End

  EquivalentTo = GoblinArcher
  
  Behavior = SubObjectsUpgrade Armor_Upgrade
    TriggeredBy = Upgrade_WildHeavyArmor
    ; UpgradeTexture = MUGobArch.tga 0 MUGobArch_HA.tga
    ; UpgradeTexture = MUGobArch.tga 0 MUGobArch2_HA.tga
    UpgradeTexture = MUGobArch.tga 0 MUGobArch3_HA.tga
    RecolorHouse = Yes
    ExcludeSubobjects = FireArowTip
  End

End


;------------------------------------------------------------------------------
;
;	This child object is used in the converted lair.
;
ChildObject GoblinArcherFromDefectedLair GoblinArcher1

  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
      
    ; StaticModelLODMode = yes ; Will append M or L to the skin name depending on GameLOD
    ; specify options for static LODs
    LodOptions = LOW
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_LOW
      MaxRandomTextures = MAX_RANDOM_TEXTURES_LOW
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_LOW
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_LOW
    End
    
    LodOptions = MEDIUM
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_MED
      MaxRandomTextures = MAX_RANDOM_TEXTURES_MED
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_MED
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_MED
    End
    
    LodOptions = HIGH
      AllowMultipleModels = ALLOW_MULTIPLE_MODELS_HIGH
      MaxRandomTextures = MAX_RANDOM_TEXTURES_HIGH
      MaxRandomAnimations = MAX_RANDOM_ANIMATIONS_HIGH
      MaxAnimFrameDelta = MAX_ANIM_FRAME_DELTA_HIGH
    End

    WadingParticleSys = WaterRipplesTrail  ; used when the unit is wading in shallow water.

    RandomTexture = MUGobArch.tga 0 MUGobArch.tga
    RandomTexture = MUGobArch2.tga 0 MUGobArch.tga
    RandomTexture = MUGobArch3.tga 0 MUGobArch.tga

    DefaultModelConditionState
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      WeaponLaunchBone = PRIMARY ARRROW
      WeaponLaunchBone = TERTIARY ARRROW
      WeaponLaunchBone = QUINARY ARRROW
    End
    
    ModelConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = MUBowGob_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End

    ModelConditionState = PREATTACK_E ;USER_6
      Model = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton = MUGobArch_SKL
      ParticleSysBone = FireArowTip arrowFire FollowBone:Yes
    End

    ModelConditionState = USER_2
      Model               = MUBowGob_SKN ;MUGobArch_SKN
      Skeleton			= MUGobArch_SKL
      ParticleSysBone		= ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    ;;//=================== ANIMATIONS ==================================================================
    ;//Wall climbing/rapelling
    AnimationState = CLIMBING
      StateName = STATE_Climbing
      Animation = Climbing
        AnimationName = MUGobArch_WALB
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
        ;if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
      EndScript
    End
    TransitionState = Trans_RunningToClimbing
      Animation = Transition
        AnimationName = MUGobArch_WALA
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_RappellingToClimbing
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE_BACKWARDS
    ;	End
    ;End
    AnimationState = RAPPELLING
      StateName = STATE_Rappelling
      Animation = Rapelling
        AnimationName = MUGobArch_WALE
        AnimationMode = LOOP
        AnimationBlendTime = 10
      End
      BeginScript;script to set transition from moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
        ;if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
      EndScript
    End
    TransitionState = Trans_RunningToRappelling
      Animation = Transition
        AnimationName = MUGobArch_WALD
        AnimationMode = ONCE
      End
    End
    ;TransitionState = Trans_ClimbingToRappelling
    ;	Animation = Transition
    ;		AnimationName = MUGobArch_WALG no anim
    ;		AnimationMode = ONCE
    ;	End
    ;End

;;------------------- FLYING & DYING --------------------------------------------------------------
;;======= FLYING

    AnimationState = PASSENGER
      Animation = Wiggling
        AnimationName = MUGobArch_FLLA
        AnimationMode = LOOP
      End
    End
    
    AnimationState = THROWN_PROJECTILE
      Animation = Thrown
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
      End
      Animation = Thrown
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
      End
    End
    
    AnimationState = FREEFALL
      Animation = Falling
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.5	0.5
        AnimationBlendTime = 10
      End
      Animation = Falling
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime = 10
      End
    End
    
    AnimationState = STUNNED_FLAILING
      Animation = flying
        AnimationName = MUGobArch_FLYB
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = ready_for_sweet_landing
        AnimationName = MUGobArch_FLYA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Animation = flying
        AnimationName = MUGobArch_FLYC
        AnimationMode = LOOP
        AnimationPriority = 10
        AnimationSpeedFactorRange	= 0.4 0.6
      End
      Flags = RANDOMSTART
    End
    
    AnimationState = DYING BURNINGDEATH
      Animation
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
        AnimationBlendTime = 10
      End
      Animation
        AnimationName	= MUGobArch_DIEC
        AnimationMode	= ONCE
        AnimationBlendTime = 10
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
    End

    AnimationState = DYING SPLATTED
      Animation = splat
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      EnteringStateFX = FX_HumanBodyGroundHit_SEE ;FX_OrcHitGround
    End
    
    ;;======= DYING

    AnimationState = DYING AFLAME
      Animation = Flaming_Death
        AnimationName = MUGobArch_MFDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes		
      End

      AnimationState = DYING
      Animation = Dying_1
        AnimationName = MUGobArch_DIEA
        AnimationMode = ONCE
      End
      Animation = Dying_2
        AnimationName = MUGobArch_DIEB
        AnimationMode = ONCE
      End
      Animation = Dying_3
        AnimationName = MUGobArch_DIEC
        AnimationMode = ONCE
      End
      Animation = landb
        AnimationName = MUGobArch_LNDB
        AnimationMode = ONCE
      End
      Animation = landc
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      BeginScript
        Preva = CurDrawablePrevAnimation()
        if Preva == "ready_for_sweet_landing" then return "landc" 
        elseif Preva == "flying" then return "landb"
        elseif GetClientRandomNumberReal(0,1) > 0.50 then return "Dying_1"
        else return "Dying_2" end
      EndScript
      End
    
    AnimationState = BURNINGDEATH
      Animation
        AnimationName = MUGobArch_MFDA
        AnimationMode = LOOP
        Distance = 25
      End
      Flags = RANDOMSTART
      ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
      ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
      ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
      ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
      ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    End
  
    AnimationState = STUNNED_STANDING_UP
      Animation = standing_back_up
        AnimationName = MUGobArch_GTPA
        AnimationMode = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
      End
      Animation = already_up
        AnimationName = MUGobArch_IDLA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "sweet_landing" then return "already_up" else return "standing_back_up" end
      EndScript
    End
    
    AnimationState = STUNNED
      Animation = splattered_on_ground
        AnimationName = MUGobArch_LNDC
        AnimationMode = ONCE
      End
      Animation = sweet_landing
        AnimationName = MUGobArch_LNDA
        AnimationMode = ONCE
      End
      BeginScript
        if CurDrawablePrevAnimation() == "ready_for_sweet_landing" then return "sweet_landing" else return "splattered_on_ground" end
      EndScript
    End
    
    ;AnimationState = BURNINGDEATH //Moved UP! ^
    ;	Animation
    ;		AnimationName	= MUGobArch_MFDA
    ;		AnimationMode	= LOOP
    ;		Distance		= 25
    ;	End
  ;		Flags	= RANDOMSTART
  ;		ParticleSysBone = BAT_HEAD FireSmall FollowBone:yes
  ;		ParticleSysBone = BAT_HEAD FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_SPINE2 FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_SPINE2 FireBuildingLargeSmoke FollowBone:yes
  ;		ParticleSysBone = BAT_PELVIS FireSmall FollowBone:yes			
  ;		ParticleSysBone = BAT_PELVIS FireBuildingLargeSmoke FollowBone:yes			
    ;End

    AnimationState = PARALYZED
      Animation
        AnimationName = MUGobArch_IDLA
        AnimationMode = LOOP
      End
    End



;;------------------------ MOVING --------------------------------------------------------------------

    AnimationState = MOVING BACKING_UP
      Animation = BackingUp
        AnimationName = MUGobArch_BAKA
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp2
        AnimationName = MUGobArch_BAKB
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation = BackingUp3
        AnimationName = MUGobArch_BAKC
        AnimationMode = LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags = RANDOMSTART
    End
      
    AnimationState = MOVING EMOTION_TERROR
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ;AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = RAISING_FLAG
      Animation = CHRA
        AnimationName = MUGobArch_CHRA
        AnimationMode = LOOP
      End
    End


    AnimationState = MOVING
      ShareAnimation = Yes
      Animation = Moving_1
        AnimationName = MUGobArch_RUNA
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Animation = Moving_2
        AnimationName = MUGobArch_RUNB
        AnimationMode = LOOP
        ; AnimationSpeedFactorRange	= 0.9 1.1
        AnimationSpeedFactorRange	= 0.5 0.6
        Distance = 20
      End
      Flags = RANDOMSTART
      ; ParticleSysBone = None InfantryDustTrails
      BeginScript ;script to set transition into moving
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
        if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
      EndScript
    End

      TransitionState = Trans_ClimbingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALC
        AnimationMode = ONCE
      End
    End
    TransitionState = Trans_RappellingToRunning
      Animation = Transition
        AnimationName = MUGobArch_WALF
        AnimationMode = ONCE
      End
    End
      
;;------------------- ATTACKING --------------------------------------------------------------------
   
    AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_CLOSE_RANGE
      Animation = ATKB
        AnimationName = MUGobArch_ATKB
        AnimationMode = ONCE
        UseWeaponTiming = Yes
      End
      ; FrameForPristineBonePositions	= 21
    End
    
    ; AnimationState = FIRING_OR_PREATTACK_A
      ; Animation = ATKA
        ; AnimationName = MUGobArch_ATKA
        ; AnimationMode = LOOP
        ; UseWeaponTiming = Yes
      ; End
      ; FrameForPristineBonePositions	= 21
    ; End

    AnimationState = PREATTACK_A USER_2
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End

    AnimationState = PREATTACK_A 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_E 
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_A USER_2
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
      ParticleSysBone = ARRROW GoblinPoisonArrow FollowBone:Yes
    End
    
    AnimationState = FIRING_OR_RELOADING_A 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    AnimationState = FIRING_OR_RELOADING_E 
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = PREATTACK_C
      Animation = ReadyToDrawn
        AnimationName = MUGobArch_ATKF1
        AnimationMode = ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End

    AnimationState = FIRING_OR_RELOADING_C
      Animation = LooseReloadDraw
        AnimationName = MUGobArch_ATKF2
        AnimationMode = ONCE
        ; UseWeaponTiming = Yes
        AnimationBlendTime = 0
      End
    End
    
    
    AnimationState	= SPECIAL_WEAPON_ONE
      Animation			= ATKA
        AnimationName	= MUGobArch_ATKA
        AnimationMode	= ONCE
      End
      FrameForPristineBonePositions	= 17
    End


;-------- Persistant firing (keep bow drawn ) ------------
    AnimationState						= CONTINUOUS_FIRE_MEAN
      Animation						= HangFrameWhileCoasting
        AnimationName				= MUGobArch_ATKF2
        AnimationMode				= MANUAL
      End
    End

    AnimationState						= CONTINUOUS_FIRE_SLOW
      Animation						= put_bow_away
        AnimationName				= MUGobArch_ATKF3
        AnimationMode				= Once
      End
    End
    
    
    ; --------- Click and Hit Reactions ------------
    AnimationState = HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = MUGobArch_HITA
        AnimationMode = ONCE
      End
    End
     
;;------------------------ EMOTIONS ----------------------------------------------------
   
    AnimationState						= WAR_CHANT
      Animation						= Chant
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState						= EMOTION_AFRAID
      Animation						= FERA
        AnimationName				= MUGobArch_FERA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= FERA
        AnimationName				= MUGobArch_FERC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Flags							= RANDOMSTART
    End
    AnimationState						= EMOTION_TAUNTING
      Animation						= TNTA
        AnimationName				= MUGobArch_TNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTB
        AnimationName				= MUGobArch_TNTB
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
      Animation						= TNTC
        AnimationName				= MUGobArch_TNTC
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_POINTING
      Animation						= Pointing1
        AnimationName				= MUGobArch_PNTA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_CELEBRATING
      Animation						= CHRA
        AnimationName				= MUGobArch_CHRA
        AnimationMode				= LOOP
        AnimationSpeedFactorRange	= 0.9 1.1
      End
    End
    AnimationState						= EMOTION_ALERT
      Animation						= Alert
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= LOOP
      End
    End
    
 ;;------------------ SELECTED STATE --------------------------------------------------------

    AnimationState = SELECTED USER_4
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    AnimationState = SELECTED
      Animation				= Selected_1
        AnimationName		= MUGobArch_ATNB
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_2
        AnimationName		= MUGobArch_ATNB2
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      Animation				= Selected_3
        AnimationName		= MUGobArch_ATNB3
        AnimationMode		= ONCE
        AnimationBlendTime	= 10
      End
      StateName				= STATE_Selected
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    

    ; --- transition states --- ;
    
    TransitionState = Trans_Down_To_Up
      Animation = Transition1
        AnimationName = MUGobArch_ATNA
        AnimationMode = ONCE
      End
      Animation = Transition2
        AnimationName = MUGobArch_ATNA2
        AnimationMode = ONCE
      End
    End
      
    TransitionState = Trans_Up_To_Down
      Animation = Transition
        AnimationName = MUGobArch_ATNC
        AnimationMode = ONCE
      End
    End
    
    
//------------------ IDLE STATE (DISGUISED AS ORC)------------------------------------------------------------
    AnimationState		= USER_4
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
        CurDrawableHideSubObject("FIREAROWTIP")
        CurDrawableHideSubObject("BOW02")
        CurDrawableHideSubObject("HEAD02")
        CurDrawableHideSubObject("HEAD03")
      EndScript			
      Flags = RESTART_ANIM_WHEN_COMPLETE
    End
    
    IdleAnimationState
      StateName						= STATE_Idle
      Animation						= IDLA
        AnimationName				= MUGobArch_IDLA
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      Animation						= IDLB
        AnimationName				= MUGobArch_IDLB
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 15
      End
      Animation						= IDLC
        AnimationName				= MUGobArch_IDLC
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLD
        AnimationName				= MUGobArch_IDLD
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLE
        AnimationName				= MUGobArch_IDLE
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 5
      End
      Animation						= IDLF
        AnimationName				= MUGobArch_IDLF
        AnimationMode				= ONCE
        AnimationSpeedFactorRange	= 0.9 1.1
        AnimationPriority			= 10
      End
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
      EndScript			
    End  
  End
  
  BuildCost = 8
  BuildTime = 5
  CommandSet = CreepCommandSet
  DisplayName = OBJECT:GenericGoblinArcher
  
  ThreatBreakdown GoblinSpiderRiderHorde_DetailedThreat
    AIKindOf = ARCHER
  End

  Behavior = ProductionUpdate ProductionUpdateModuleTag
      GiveNoXP = Yes
  End

  Behavior = StancesBehavior ModuleTag_StancesBehavior
    StanceTemplate = ArcherHorde
  End
  
  Behavior = ObjectCreationUpgrade ModuleTag_MakePoisonArrows
    TriggeredBy = Upgrade_ObjectLevel1		
    FadeInTime = 100
    GrantUpgrade = Upgrade_WildSpiderVenomSacks
  End
  
  ; *** AUDIO Parameters ***;

  VoiceAttack = GoblinCreepVoxAttack
  VoiceAttackAir = GoblinCreepVoxAttack
  VoiceAttackStructure = GoblinCreepVoxAttack
  VoiceAttackCharge = GoblinCreepVoxAttack
  ;VoiceCreated = EVA:OrcArchersCreated
  ;VoiceFullyCreated = EVA:OrcArchersCreated
  VoiceMove = GoblinCreepVoxMove
  VoiceMoveWhileAttacking = GoblinCreepVoxMove
  VoicePriority = 3
  VoiceRetreatToCastle = GoblinCreepVoxMove
  VoiceSelect = GoblinCreepVoxSelectMS
  VoiceSelectBattle = GoblinCreepVoxSelectMS

  ;VoiceEnterStateAttack 					= OrcArcherVoiceEnterStateAttack		
  ;VoiceEnterStateAttackStructure			= OrcArcherVoiceEnterStateAttackBuilding
  ;VoiceEnterStateAttackCharge				= OrcArcherVoiceEnterStateAttackCharge
  ;VoiceEnterStateMove 					= OrcArcherVoiceEnterStateMove		
  ;VoiceEnterStateMoveWhileAttacking		= OrcArcherVoiceEnterStateDisengage
  ;VoiceEnterStateRetreatToCastle			= OrcArcherVoiceEnterStateRetreat
  
  SoundImpact 							= ImpactHorse					;UrukDie

  UnitSpecificSounds
    VoiceGarrison						= GoblinCreepVoxMove
    VoiceEnterUnitSlaughterHouse		= GoblinCreepVoxMove
    VoiceEnterUnitMordorMumakil			= GoblinCreepVoxMove
    VoiceEnterUnitEvilMenTransportShip	= GoblinCreepVoxMove
    VoiceEnterUnitTransportShip			= GoblinCreepVoxMove
    VoiceInitiateCaptureBuilding		= GoblinCreepVoxMove
  End

  ;--------------------------------

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40	 ; in Dist/Sec
    DestructionDelay = 8000
    Sound = INITIAL GoblinCreepVoxDie
  End

  Behavior = SlavedUpdate ModuleTag_Slave
    GuardMaxRange		= 250
    GuardWanderRange	= 40
    UseSlaverAsControlForEvaObjectSightedEvents = Yes
  End

  Behavior = EmotionTrackerUpdate	Module_EmotionTracker
    TauntAndPointDistance		=	350		; max distance to taunted/pointed objet
    TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
    TauntAndPointExcluded		=	NONE
    AfraidOf					=	EMOTION_AFRAIDOF_OBJECTFILTER
    AlwaysAfraidOf				=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
    PointAt						=	EMOTION_POINTAT_OBJECTFILTER
    HeroScanDistance			=	150
    FearScanDistance			=	250

    AddEmotion	=	Terror_Base
    AddEmotion	=	Doom_Base
    AddEmotion	=   BraceForBeingCrushed_Base
    AddEmotion	=	UncontrollableFear_Base_Evil
    AddEmotion	=	FearIdle_Base
    AddEmotion	=	FearBusy_Base
    AddEmotion	=	Point_Base
    AddEmotion	=	Taunt_Base	
    AddEmotion	=	CheerIdle_Base
    AddEmotion	=	CheerBusy_Base
    AddEmotion	=	HeroCheerIdle_Base
    AddEmotion	=	HeroCheerBusy_Base
    AddEmotion	=	Alert_Base
  End
  
  #include "..\..\..\..\SEE_includes\Battlestance_SEE.inc"

End


;------------------------------------------------------------------------------
;
;	This child object is used in the neutral lair.
;
ChildObject GoblinArcher_Slaved GoblinArcherFromDefectedLair

  EvaEnemyObjectSightedEvent = GoblinCreepSighted ; Special event for goblins showing up. Helps distinguish the real enemies from random creeps
  EvaEnemyObjectSightedAfterRespawnEvent = GoblinCreepSighted ; Event to run after the Goblin Lair is respawned. WARNING: This INI field only works for "SlavedUpdate.UseSlaverAsControlForEvaObjectSightedEvents = Yes" units

  ; Should be the same as MordorGoblinArcher but with CREEP.
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER THROWN_OBJECT ARCHER GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT CAN_CLIMB_WALLS ORC CREEP SCORE CAN_ATTACK
  EquivalentTo = GoblinArcherFromDefectedLair

  VisionRange = CREEP_VISION
  
  ThreatBreakdown MordorGoblinArcherSlaved_ThreatBreakdown
    AIKindOf = CREEP
  End
  
  Behavior = SlavedUpdate ModuleTag_Slave
    GuardMaxRange		= 250
    GuardWanderRange	= 40
    UseSlaverAsControlForEvaObjectSightedEvents = Yes
  End

End
