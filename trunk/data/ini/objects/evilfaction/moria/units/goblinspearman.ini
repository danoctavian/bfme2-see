; ####################################################
; "Battle for Middle Earth II - Special Extended Edition - Director's Cut"
; ####################################################

; GoblinSpearman.INI for MORIA (Wild) faction...
; ------------------------------------------------------------------------------
; NOTE: Keep this organized!


Object GoblinSpearman

	ButtonImage 	= WOR_GoblinFighters
	SelectPortrait 	= WFGoblinPikeman
  
  Draw = W3DHordeModelDraw ModuleTag_01

	OkToChangeModelColor 	= No //Yes ;In SEE we don't want factions colors on units! 
	StaticModelLODMode 		= Yes 
	
		LodOptions							= LOW
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_LOW
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_LOW
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_LOW
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_LOW
		End
		LodOptions							= MEDIUM
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_MED
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_MED
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_MED
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_MED
		End
		LodOptions							= HIGH
			AllowMultipleModels				= ALLOW_MULTIPLE_MODELS_HIGH
			MaxRandomTextures				= MAX_RANDOM_TEXTURES_HIGH
			MaxRandomAnimations				= MAX_RANDOM_ANIMATIONS_HIGH
			MaxAnimFrameDelta				= MAX_ANIM_FRAME_DELTA_HIGH
		End

		WadingParticleSys = EntRipples  //Used when the unit is wading in shallow water. Make sure ALL units (inc monsters, machines, etc) has this! (Naz)
		
		RandomTexture = MUGblnSwrd.tga 0 MUGblnSwrd.tga
		RandomTexture = MUGblnSwrd2.tga 0 MUGblnSwrd.tga
		RandomTexture = MUGblnSwrd3.tga 0 MUGblnSwrd.tga

	DefaultModelConditionState
		Model = MUGblnSpr_NHA //WUSpearGob_NHA //MUSwrdGob_SKN ;MUGblnSwrd_SKN
		Skeleton = MUGblnSpr_SKL //MUGblnSwrd_SKL
	End
    
//    CREATE_A_HERO_00
    
//	ModelConditionState = USER_1
//			Model               = WUSpearGob_SKN //MUSwrdGob_SKN
//			Skeleton			= MUGblnSpr_SKL //MUGblnSwrd_SKL
//			;ParticleSysBone		= C_WEAPON GoblinPoisonSword FollowBone:Yes //(Green glow FX)
//			;ParticleSysBone		= C_WEAPON GoblinFighterPoison2 FollowBone:Yes //Added for SEE! (green sparkles FX)
//	End
		
	ModelConditionState = USER_9
      Model = MUGblnSpr_NHA //WUSpearGob_NHA //WUSpearGob_SKN //MUSwrdGob_SKN ;MUGblnSwrd_SKN
      Skeleton = MUGblnSpr_SKL //MUGblnSwrd_SKL
	  ParticleSysBone     = NONE MoriaSpellbookScurry
    End
    
//    ModelConditionState = USER_1 USER_9
//			Model               = WUSpearGob_SKN //MUSwrdGob_SKN
//			Skeleton			= MUGblnSpr_SKL //MUGblnSwrd_SKL
//			ParticleSysBone     = NONE MoriaSpellbookScurry
//			;ParticleSysBone		= C_WEAPON GoblinPoisonSword FollowBone:Yes //(Green glow FX)
//			;ParticleSysBone		= C_WEAPON GoblinFighterPoison2 FollowBone:Yes //Added for SEE! (green sparkles FX)
//	End

	ModelConditionState = CREATE_A_HERO_00
      Model = MUGblnSpr_SKN //WUSpearGob_SKN
      Skeleton = MUGblnSpr_SKL
    End
    
    ModelConditionState = CREATE_A_HERO_00 USER_9
      Model = MUGblnSpr_SKN //WUSpearGob_SKN
      Skeleton = MUGblnSpr_SKL
	  ParticleSysBone     = NONE MoriaSpellbookScurry
    End
   

; ANIMATIONS ==========================================

; ------------------------------------------------------------------------------
		AnimationState						= PASSENGER
			Animation						= Wiggling
				AnimationName				= MUGblnSpr_FLLA
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= THROWN_PROJECTILE
			StateName						= STATE_Flying
			Animation						= Thrown
				AnimationName				= MUGblnSpr_FLYA
				AnimationMode				= LOOP
			End
		End
		
	AnimationState						= CLIMBING
		StateName						= STATE_Climbing
		Animation						= Climbing
			AnimationName				= MUGblnSwrd_WALB				//Doesn't exist as MUGblnSpr!
			AnimationMode				= LOOP
			AnimationBlendTime			= 10
		End
		BeginScript;script to set transition from moving
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
			if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
		EndScript
	End
	TransitionState = Trans_RunningToClimbing
		Animation = Transition
			AnimationName = MUGblnSwrd_WALA								//Doesn't exist as MUGblnSpr!
			AnimationMode = ONCE
		End
	End
	TransitionState = Trans_RappellingToClimbing
		Animation = Transition
			AnimationName = MUGblnSwrd_WALG								//Doesn't exist as MUGblnSpr!
			AnimationMode = ONCE_BACKWARDS
		End
	End
	AnimationState						= RAPPELLING
		StateName						= STATE_Rappelling
		Animation						= Rapelling
			AnimationName				= MUGblnSwrd_WALE				//Doesn't exist as MUGblnSpr!
			AnimationMode				= LOOP
			AnimationBlendTime			= 10
		End
		BeginScript;script to set transition from moving
			Prev = CurDrawablePrevAnimationState()
			if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
			if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
		EndScript
	End
	TransitionState = Trans_RunningToRappelling
		Animation = Transition
			AnimationName = MUGblnSwrd_WALD								//Doesn't exist as MUGblnSpr!
			AnimationMode = ONCE
		End
	End
	TransitionState = Trans_ClimbingToRappelling
		Animation = Transition
			AnimationName = MUGblnSwrd_WALG								//Doesn't exist as MUGblnSpr!
			AnimationMode = ONCE
		End
	End

		AnimationState						= FREEFALL
			Animation						= Falling
				AnimationName				= MUGblnSpr_FLLA ;FLYB
				AnimationMode				= LOOP
				AnimationBlendTime			= 10
				AnimationSpeedFactorRange	= 0.7	0.7
			End
		End
		
		AnimationState						= STUNNED_FLAILING
			StateName						= STATE_Flying
			Animation						= ready_for_sweet_landing
				AnimationName				= MUGblnSpr_FLYA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
				AnimationBlendTime			= 0
			End
			Animation						= flying
				AnimationName				= MUGblnSpr_FLLA ;FLYB
				AnimationMode				= LOOP
				AnimationPriority			= 10
				AnimationSpeedFactorRange	= 0.4 0.6
				AnimationBlendTime			= 0
			End
			Flags							= RANDOMSTART
		End
		
		AnimationState						= DYING SPLATTED
			Animation						= splat
				AnimationName				= MUGblnSpr_LNDC ;B
				AnimationMode				= ONCE
			End
			EnteringStateFX	= FX_HumanBodyGroundHit_SEE ;FX_OrcHitGround
		End		
		
; ------------------------------------------------------------------------------ SEE BURNING DEATH - start		
		
		AnimationState			= DYING BURNINGDEATH
			Animation
				AnimationName	= MUGblnSpr_DIEA
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
			;Animation
			;	AnimationName	= MUGblnSpr_DIEB
			;	AnimationMode	= ONCE
			;	AnimationBlendTime = 10
			;End
			Flags = RANDOMSTART
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_HEAD BurningDeathSmoke FollowBone:yes 
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes 
			ParticleSysBone     = BAT_SPINE2 BurningDeathSmoke FollowBone:yes
			ParticleSysBone     = BAT_PELVIS FireSmall FollowBone:yes
			ParticleSysBone     = BAT_PELVIS BurningDeathSmoke FollowBone:yes
		End

		AnimationState			= DYING AFLAME
			StateName			= STATE_Dead.
			Animation
				AnimationName	= MUGblnSpr_DIEA
				AnimationMode	= ONCE
				AnimationBlendTime = 10
			End
			;Animation
			;	AnimationName	= MUGblnSpr_DIEB
			;	AnimationMode	= ONCE
			;	AnimationBlendTime = 10
			;End
			Flags = RANDOMSTART
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_HEAD BurningDeathSmoke FollowBone:yes 
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes 
			ParticleSysBone     = BAT_SPINE2 BurningDeathSmoke FollowBone:yes
			ParticleSysBone     = BAT_PELVIS FireSmall FollowBone:yes
			ParticleSysBone     = BAT_PELVIS BurningDeathSmoke FollowBone:yes
		End
		
		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= MUGblnSpr_MFDA
				AnimationMode	= LOOP
				Distance			= 30
			End
			ParticleSysBone     = BAT_HEAD FireSmall FollowBone:yes
			ParticleSysBone     = BAT_HEAD BurningDeathSmoke FollowBone:yes 
			ParticleSysBone     = BAT_SPINE2 FireSmall FollowBone:yes 
			ParticleSysBone     = BAT_SPINE2 BurningDeathSmoke FollowBone:yes
			ParticleSysBone     = BAT_PELVIS FireSmall FollowBone:yes
			ParticleSysBone     = BAT_PELVIS BurningDeathSmoke FollowBone:yes
		End

; ------------------------------------------------------------------------------ SEE BURNING DEATH - end			

		AnimationState						= DYING
			StateName						= STATE_Dead.
			Animation						= Dying_1
				AnimationName				= MUGblnSpr_DIEA
				AnimationMode				= ONCE
			End
			Animation						= Dying_2
				AnimationName				= MUGblnSpr_DIEB
				AnimationMode				= ONCE
			End
			Animation						= landb
				AnimationName				= MUGblnSpr_LNDA ;B
				AnimationMode				= ONCE
			End
			Animation						= landc
				AnimationName				= MUGblnSpr_LNDC
				AnimationMode				= ONCE
			End			
			BeginScript
				Preva = CurDrawablePrevAnimation()
				if Preva == "ready_for_sweet_landing" then return "landb" 
				elseif Preva == "flying" then return "landc"
				elseif GetClientRandomNumberReal(0,1) > 0.50 then return "Dying_1"
				else return "Dying_2" end
			EndScript
		End
		
		AnimationState						= STUNNED_STANDING_UP
			StateName						= STATE_Ready
			Animation						= standing_back_up
				AnimationName				= MUGblnSpr_GTPA
				AnimationMode				= ONCE
				
			End
			Animation						= already_up
				AnimationName				= MUGblnSpr_IDLB
				AnimationMode				= LOOP
				AnimationBlendTime			= 20
			End
			BeginScript
				if CurDrawablePrevAnimation() == "sweet_landing"
				then
					return "already_up"
				else
					return "standing_back_up"
				end
			EndScript
		End
				
		AnimationState						= STUNNED
			StateName						= STATE_Stunned
			Animation						= splatted_on_ground
				AnimationName				= MUGblnSpr_LNDC
				AnimationMode				= ONCE
			End
			Animation						= sweet_landing
				AnimationName				= MUGblnSpr_LNDA
				AnimationMode				= ONCE
			End
			BeginScript
				if CurDrawablePrevAnimation() == "ready_for_sweet_landing"
				then
					return "sweet_landing"
				else
					return "splatted_on_ground"
				end
			EndScript
		End

		AnimationState						= PARALYZED
			Animation
				AnimationName				= MUGblnSpr_IDLA
				AnimationMode				= LOOP
			End
		End

; ------------------------------------------------------------------------------  
  
		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = TrotAndFire
				AnimationName = MUGblnSpr_RUNA    ; MUGblnSwrd_ATRA doesn't exist..
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
			//ParticleSysBone = None InfantryDustTrails //Was out?
		End
    
		AnimationState						= MOVING BACKING_UP
			Animation						= BackingUp
				AnimationName				= MUGblnSpr_BAKA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.9 1.1
			End
			;Flags							= RANDOMSTART
		End
		
		AnimationState						= MOVING EMOTION_TERROR
			ShareAnimation					= Yes
			Animation						= Moving_1
				AnimationName				= MUGblnSpr_RUNA
				AnimationMode				= LOOP
				;AnimationSpeedFactorRange	= 0.9 1.1
				AnimationSpeedFactorRange	= 0.5 0.6
				Distance					= 20
			End
;			Animation						= Moving_3
;				AnimationName				= MUGblnSwrd_RUNC
;				AnimationMode				= LOOP
;				AnimationSpeedFactorRange	= 0.9 1.1
;			End
			Flags							= RANDOMSTART
			//ParticleSysBone					= None InfantryDustTrails
		End
		
		AnimationState						= MOVING
			StateName						= STATE_Running
			ShareAnimation					= Yes
			Animation						= Moving_1
				AnimationName				= MUGblnSpr_RUNA
				AnimationMode				= LOOP
				;AnimationSpeedFactorRange	= 0.9 1.1
				AnimationSpeedFactorRange	= 0.5 0.6
				Distance					= 20
			End
;			Animation						= Moving_3
;				AnimationName				= MUGblnSwrd_RUNC
;				AnimationMode				= LOOP
;				AnimationSpeedFactorRange	= 0.9 1.1
;				Distance					= 10
;			End
			Flags							= RANDOMSTART
			//ParticleSysBone					= None InfantryDustTrails
			BeginScript;script to set transition into moving
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End
	TransitionState = Trans_ClimbingToRunning
		Animation = Transition
			AnimationName = MUGblnSwrd_WALC					//Doesn't exist as MUGblnSpr!
			AnimationMode = ONCE
		End
		Animation = Transition
			AnimationName = MUGblnSwrd_WALH					//Doesn't exist as MUGblnSpr!
			AnimationMode = ONCE
		End
	End
	TransitionState = Trans_RappellingToRunning
		Animation = Transition
			AnimationName = MUGblnSwrd_WALF					//Doesn't exist as MUGblnSpr!
			AnimationMode = ONCE
		End
	End

; ------------------------------------------------------------------------------
		
		AnimationState						= FIRING_OR_PREATTACK_A
			StateName						= STATE_Ready
			Animation						= ATKA
				AnimationName				= MUGblnSpr_ATKA
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes	
			End
			Animation						= ATKB
				AnimationName				= MUGblnSpr_ATKB ;C
				AnimationMode				= ONCE
				UseWeaponTiming				= Yes	
			End
		End
		
; ------------------------------------------------------------------------------ WAR CHANT (for LargeGroupBonus)

    AnimationState = WAR_CHANT	; Added for SEE! (Might need SKL.)
  		Animation = ChantA
  			AnimationName 	= MUGblnSpr_CHRA
  			AnimationMode	= ONCE
			AnimationSpeedFactorRange	= 0.9 1.1
  		End
		Animation = IdleB
  			AnimationName 	= MUGblnSpr_IDLB
  			AnimationMode 	= ONCE
  		End
  		Animation = IdleC
  			AnimationName 	= MUGblnSpr_IDLC
  			AnimationMode 	= ONCE
  		End
  		Flags = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
  	End		
		
; ------------------------------------------------------------------------------

		AnimationState						= EMOTION_AFRAID
			Animation						= FERA
				AnimationName				= MUGblnSpr_FERA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_TAUNTING
			Animation						= TNTA
				AnimationName				= MUGblnSpr_TNTA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_POINTING
			Animation						= Pointing1A
				AnimationName				= MUGblnSpr_PNTA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_CELEBRATING
			Animation						= CHRA
				AnimationName				= MUGblnSpr_CHRA
				AnimationMode				= LOOP
			End
		End
		AnimationState						= EMOTION_ALERT
			Animation						= IDLB
				AnimationName				= MUGblnSpr_IDLB
				AnimationMode				= LOOP
			End
		End
		
		AnimationState						= RAISING_FLAG
			Animation						= CHRA
				AnimationName				= MUGblnSpr_CHRA
				AnimationMode				= LOOP
			End
		End

; ------------------------------------------------------------------------------

		AnimationState = SELECTED USER_4
			Animation				= Selected_Loop
				AnimationName		= MUGblnSpr_IDLA ;ATNB					//Doesn't exist as MUGblnSpr!
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
			End
			StateName				= Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
				CurDrawableHideSubObject("Forged_Blade")
				CurDrawableHideSubObject("Glow")
				CurDrawableHideSubObject("WEAPON02")
				CurDrawableHideSubObject("WEAPON03")
				CurDrawableHideSubObject("WEAPON04")
				CurDrawableHideSubObject("WEAPON05")
				CurDrawableHideSubObject("HEAD02")
				CurDrawableHideSubObject("HEAD03")
				CurDrawableHideSubObject("ARM")
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End
    
		AnimationState = SELECTED
			SimilarRestart				= Yes
			Animation				= Selected_Loop
				AnimationName		= MUGblnSwrd_ATNB.MUGblnSwrd_SKL //MUGblnSpr_IDLA ;ATNB					//Doesn't exist as MUGblnSpr!
				AnimationMode		= LOOP
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange	= 0.5 1.3 //not da same speed
			End
			StateName				= Selected
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end			
				;if Prev == "Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
			EndScript
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End
		

		; --- transition states --- ; ################################################################## FIX THIS!
		
		TransitionState = Trans_Down_To_Up
			Animation = Transition
				AnimationName = MUGblnSwrd_ATNA.MUGblnSwrd_SKL					//Doesn't exist as MUGblnSpr!
				AnimationMode = ONCE
				AnimationSpeedFactorRange	= 0.5 1.3 //not da same speed
			End
		End
	    
		TransitionState = Trans_Up_To_Down
			Animation = Transition
				AnimationName = MUGblnSwrd_ATNC.MUGblnSwrd_SKL					//Doesn't exist as MUGblnSpr!
				AnimationMode = ONCE
			End
		End

; ------------------------------------------------------------------------------
// (DISGUISED AS ORC)
		
		AnimationState = USER_4
			StateName						= Idle
			Animation						= IDLA
				AnimationName				= MUGblnSpr_IDLA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationPriority			= 10
			End
			Animation						= IDLB
				AnimationName				= MUGblnSpr_IDLB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationPriority			= 10
			End
			Animation						= IDLC
				AnimationName				= MUGblnSpr_IDLC
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationPriority			= 5
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end

				CurDrawableHideSubObject("Forged_Blade")
				CurDrawableHideSubObject("Glow")
				CurDrawableHideSubObject("WEAPON02")
				CurDrawableHideSubObject("WEAPON03")
				CurDrawableHideSubObject("WEAPON04")
				CurDrawableHideSubObject("WEAPON05")
				CurDrawableHideSubObject("HEAD02")
				CurDrawableHideSubObject("HEAD03")
				CurDrawableHideSubObject("ARM")
				CurDrawableHideSubObject("SHOULDER")
			EndScript			
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

; ------------------------------------------------------------------------------
		
		IdleAnimationState
			StateName						= Idle
			Animation						= IDLA
				AnimationName				= MUGblnSpr_IDLA
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationPriority			= 10
			End
			Animation						= IDLB
				AnimationName				= MUGblnSpr_IDLB
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationPriority			= 10
			End
			Animation						= IDLC
				AnimationName				= MUGblnSpr_IDLC
				AnimationMode				= ONCE
				AnimationSpeedFactorRange	= 0.9 1.1
				AnimationPriority			= 5
			End
		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Selected" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") end
				; if Prev == "STATE_Planted"	then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
				; if Prev == "Selected" or Prev == "Trans_Down_To_Up" then CurDrawableSetTransitionAnimState("TRANS_SB_Normal") end
			EndScript			
		End   
  End
  
	Draw = W3DScriptedModelDraw DustEffects
	    DefaultModelConditionState
	      Model = None
	    End
	    IdleAnimationState
	    End
	    AnimationState = MOVING WADING
			ParticleSysBone = None FootstepSlash
	    End
	    AnimationState = MOVING ACCELERATE
			ParticleSysBone = None InfantryDustTrails_SEE
	    End
	    AnimationState = MOVING DECELERATE
			ParticleSysBone = None InfantryDustTrails_SEE
	    End
	    AnimationState = MOVING 
			ParticleSysBone	= None InfantryDustTrails_SEE
	    End
	End  
  
    #include "..\..\..\includes\StunDrawModuleSmall.inc" //SEE!

; ------------------------------------------------------------------------------
	
  ; ***DESIGN parameters ***
	Side				= Wild
	IsTrainable			= Yes
	EditorSorting		= UNIT
	ThreatLevel			= 1.0
	ThingClass			= HORDE_UNIT
	CommandPoints		= 1
	TransportSlotCount 	= TRANSPORTSLOTCOUNT_UNIT
	ShockwaveResistance 	= SHOCKWAVE_RESISTANCE_WEAK	

; ------------------------------------------------------------------------------
	
	WeaponSet
		Conditions 			= None 
		Weapon 				= PRIMARY    GoblinFighterSword
		AutoChooseSources 	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	WeaponSet
		Conditions 			= PLAYER_UPGRADE ;WEAPONSET_TOGGLE_1
		Weapon 				= PRIMARY GoblinFighterSwordPoisoned
		AutoChooseSources 	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
; ------------------------------------------------------------------------------	
	ArmorSet
		Conditions      	= None
		Armor           = GoblinFighterArmor
		DamageFX        = NormalDamageFX
	End
	ArmorSet
		Conditions		= PLAYER_UPGRADE
		Armor			= GoblinFighterScavengedArmor
		DamageFX        = NormalDamageFX
	End
	
; ------------------------------------------------------------------------------
	
	VisionRange 		= VISION_STANDARD_MELEE_HORDEMEMBER //GOBLIN_FIGHTER_VISION_RANGE	
	ShroudClearingRange 	= SHROUD_CLEAR_STANDARD 
	
	VisionSide 	= 35%
	VisionRear 	= 25%
	
	; MaxVisionBonusPercent = 300% 	//Sûl took this out? Why? Maybe cause the Horde has it? (Naz)
	; VisionBonusTestRadius = 200
	; VisionBonusPercentPerFoot = 2.0%
	
	DisplayName			= OBJECT:GoblinSpearman
	CrushableLevel		= 0		;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel			= 0		;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	BountyValue			= GOBLIN_FIGHTER_BOUNTY_VALUE
	CrushRevengeWeapon	= BasicInfantryCrushRevenge
	CommandSet			= GoblinFighterCommandSet

; ------------------------------------------------------------------------------
	
	; *** AUDIO Parameters ***;

	VoiceAttack							= GoblinWarriorVoiceAttack
	VoiceAttackCharge					= GoblinWarriorVoiceAttackCharge
	VoiceAttackMachine					= GoblinWarriorVoiceAttack
	VoiceAttackStructure					= GoblinWarriorVoiceAttackBuilding
	VoiceCreated							= EVA:GoblinWarriorCreated
	VoiceFullyCreated						= EVA:GoblinWarriorCreated
	VoiceGuard							= GoblinWarriorVoiceGuard
	VoiceMove							= GoblinWarriorVoiceMove
	VoiceMoveOverWalls					= GoblinWarriorVoiceMoveWalls
	VoiceMoveToCamp						= GoblinWarriorVoiceMoveCamp
	VoiceMoveWhileAttacking				= GoblinWarriorVoiceDisengage
	VoicePriority							= 30
	VoiceRetreatToCastle					= GoblinWarriorVoiceRetreat
	VoiceSelect							= GoblinWarriorVoiceSelectMS
	VoiceSelectBattle 						= GoblinWarriorVoiceSelectBattle

	VoiceEnterStateAttack					= GoblinWarriorVoiceEnterStateAttack
	VoiceEnterStateAttackCharge			= GoblinWarriorVoiceEnterStateAttackCharge
	VoiceEnterStateAttackMachine			= GoblinWarriorVoiceEnterStateAttack
	VoiceEnterStateAttackStructure			= GoblinWarriorVoiceEnterStateAttackBuilding
	VoiceEnterStateMove					= GoblinWarriorVoiceEnterStateMove
	VoiceEnterStateMoveOverWalls			= GoblinWarriorVoiceEnterStateMoveWalls
	VoiceEnterStateMoveToCamp			= GoblinWarriorVoiceEnterStateMoveCamp
	VoiceEnterStateMoveWhileAttacking		= GoblinWarriorVoiceEnterStateDisengage
	VoiceEnterStateRetreatToCastle			= GoblinWarriorVoiceEnterStateRetreat

	SoundImpact							= ImpactHorse

	UnitSpecificSounds
		VoiceEnterUnitEvilMenTransportShip	= GoblinWarriorVoiceMoveShip
		VoiceEnterUnitMordorMumakil		= GoblinWarriorVoiceMoveGarrison
		VoiceEnterUnitSlaughterHouse		= GoblinWarriorVoiceMoveGarrison
		VoiceGarrison						= GoblinWarriorVoiceMoveGarrison
		VoiceInitiateCaptureBuilding			= GoblinWarriorVoiceCaptureBuilding
	End

	CrowdResponseKey = Goblin

	ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
		;ModelCondition = Required:EMOTION_CELEBRATING	Excluded:DYING ENGAGED	Sound:EmotionGoblinCompilationVoxCheerSinglesLoop	;MOVING ATTACKING 
		;ModelCondition = Required:EMOTION_TAUNTING		Excluded:DYING ENGAGED	Sound:EmotionGoblinCompilationVoxTauntSinglesLoop	;MOVING ATTACKING
		ModelCondition = Required:RAISING_FLAG			Excluded:DYING ENGAGED	Sound:EmotionGoblinCompilationVoxTauntSinglesLoop
	End

	;Waiting to see if the emotion system is going to be improved first before hooking up emotional audio
	;
	;ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_ModelConditionAudioLoop
	;	ModelCondition = Required:EMOTION_POINTING		Sound:GoblinWarriorVoicePointLoop
	;	ModelCondition = Required:EMOTION_AFRAID 		Sound:GoblinWarriorVoiceFearLoop
	;	ModelCondition = Required:EMOTION_TAUNTING		Sound:GoblinWarriorVoiceTauntLoop
	;	ModelCondition = Required:EMOTION_CELEBRATING	Sound:GoblinWarriorVoiceCheerLoop
	;End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
      	MaxUpdateRangeCap = 800
		AnimationSound = Sound:BodyFallGeneric2	Animation:MUGblnSpr_SKL.MUGblnSpr_DIEA	Frames:10
		AnimationSound = Sound:BodyFallGeneric2	Animation:MUGblnSpr_SKL.MUGblnSpr_DIEB		Frames:7
		AnimationSound = Sound:BodyFallOrc			Animation:MUGblnSpr_SKL.MUGblnSpr_LNDA	Frames:6
		AnimationSound = Sound:BodyFallOrc			Animation:MUGblnSpr_SKL.MUGblnSpr_LNDC	Frames:3
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU		;Tie into LargeGroupAudio system
		Key  = Goblin
	End
	
; ------------------------------------------------------------------------------	

  ; *** ENGINEERING Parameters ***

	Behavior = SpecialPowerModule ModuleTag_PoisonedBladeSpecialPower                      
		SpecialPowerTemplate	= SpecialAbilityGoblinFighterPoisonedBlades
		StartsPaused				= No
	End

	Behavior = WeaponModeSpecialPowerUpdate ModuleTag_PoisonedBladeUpdate
		SpecialPowerTemplate	= SpecialAbilityGoblinFighterPoisonedBlades
		Duration					= 20000
		WeaponSetFlags			= WEAPONSET_TOGGLE_1
		StartsPaused				= No
	End

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP CAN_CLIMB_WALLS ORC
 
	Body = ActiveBody ModuleTag_02
		MaxHealth         	= GOBLIN_FIGHTER_HEALTH
		MaxHealthDamaged  	= GOBLIN_FIGHTER_HEALTH_DAMAGED
		BurningDeathBehavior 	= Yes
		BurningDeathFX       = FX_InfantryBurningFlame
	End
 
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ;ATTACK_BUILDINGS
		MoodAttackCheckRate			= 500
		AILuaEventsList				= GoblinFighterFunctions //IsengardFighterFunctions
		AttackPriority				= AttackPriority_Infantry
		BurningDeathTime				= BURNINGDEATH_DURATION_INFANTRY
	End

; ------------------------------------------------------------------------------

	LocomotorSet
		Locomotor    	= TestWallScalingHordeLocomotor
		Condition     	= SET_NORMAL
		Speed        	= NORMAL_WILD_FAST_MEMBER_SPEED		; RotWK originally NORMAL_FOOT_VERYFAST_MEMBER_SPEED
	End
	LocomotorSet
		Locomotor    	= HumanWanderLocomotor
		Condition     	= SET_WANDER
		Speed        	= NORMAL_WILD_FAST_MEMBER_SPEED
	End
	LocomotorSet
		Locomotor 		= BurningDeathLocomotorInfantry
		Condition 		= SET_BURNINGDEATH
		Speed	  		= BURNINGDEATH_WANDERSPEED_INFANTRY
	End
	
; ------------------------------------------------------------------------------	
 
	Behavior = FlammableUpdate ModuleTag_BurningDeathPromotor
		AflameDuration		= TROOP_AFLAME_DURATION			// If I catch fire, I'll burn for this long...
		AflameDamageAmount	= TROOP_AFLAME_DAMAGE_AMOUNT		// taking this much damage...
		AflameDamageDelay	= TROOP_AFLAME_DAMAGE_DELAY		// this often.
		FlameDamageLimit		= TROOP_FLAME_DAMAGE_LIMIT
		FlameDamageExpiration	= TROOP_FLAME_DAMAGE_EXPIRATION
	End
  
	Behavior = SlowDeathBehavior ModuleTag_SDB1
		DeathTypes 		= ALL -KNOCKBACK -NORMAL
		SinkDelay		= BURNINGDEATH_SINKDELAY_HUMANIOD
		SinkRate			= BURNINGDEATH_SINKRATE_HUMANIOD
		DestructionDelay	= BURNINGDEATH_DESTRUCTIONDELAY_HUMANIOD
		Sound = INITIAL GoblinVoxDieMS
	End
 
	Behavior = SquishCollide ModuleTag_SC
	;nothing
	End

	Behavior = HordeMemberCollide ModuleTag_HMC
	;nothing
	End
	
	Behavior = SlowDeathBehavior ModuleTag_SDB2
		; Same as normal death, but no sound (sound already played by SoundImpact = ... )
		DeathTypes 		= NONE +KNOCKBACK
		SinkDelay		= BURNINGDEATH_SINKDELAY_HUMANIOD
		SinkRate			= BURNINGDEATH_SINKRATE_HUMANIOD
		DestructionDelay	= BURNINGDEATH_DESTRUCTIONDELAY_HUMANIOD
		Sound = INITIAL GoblinVoxDieMS
	End
	
  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult				= 1.0
    ShockStunnedTimeLow		= 800	;msec
    ShockStunnedTimeHigh		= 1000	;msec
    ShockStandingTime		= 2133	;msec
  End	

; ------------------------------------------------------------------------------  
//  BezierProjectileBehavior is new in RotWK!
  Behavior = BezierProjectileBehavior ModuleTag_08 ; Module starts asleep, and wakes up when thrown.
    ; 
    FirstHeight				= 24  ; Height of Bezier control points above highest intervening terrain
    SecondHeight				= 24
    FirstPercentIndent			= 30% ; Percentage of shot distance control points are placed
    SecondPercentIndent		= 70%
    TumbleRandomly			= Yes

    CrushStyle				= Yes ; I don't detonate, I just hit
    DieOnImpact				= Yes
    BounceCount				= 1   ; When I hit the ground, I'll arc again
    BounceDistance			= 40 ; this far
    BounceFirstHeight			= 24  ; Height of Bezier control points above highest intervening terrain
    BounceSecondHeight		= 24
    BounceFirstPercentIndent 	= 20% ; Percentage of shot distance control points are placed
    BounceSecondPercentIndent = 80%

    GroundHitFX		= FX_ThrownRockGroundHit
    GroundBounceFX	= FX_ThrownRockBounceHit
  End		
  
	#include "..\..\..\..\SEE_includes\GiantBirdDroppingHumanBody_SEE.inc"

; ------------------------------------------------------------------------------ FORGED BLADES	
	
	;Behavior = WeaponSetUpgrade WeaponSetUpgradeForgedBlades //WeaponSetUpgradeModuleTag
	;	TriggeredBy = Upgrade_WildForgedBlades
	;End
	;Behavior = SubObjectsUpgrade Sword_Upgrade
	;	TriggeredBy = Upgrade_WildForgedBlades
	;	ShowSubObjects	= Forged_Blade
	;END	
	
; ------------------------------------------------------------------------------ SCAVENGED ARMOR

	Behavior = SubObjectsUpgrade Armor_Upgrade
		TriggeredBy			= Upgrade_WildHeavyArmor
		UpgradeTexture 		= MUGblnSwrd.tga 0 MUGblnSwrd_HA.tga
		UpgradeTexture		= MUGblnSwrd2.tga 0 MUGblnSwrd2_HA.tga
		UpgradeTexture		= MUGblnSwrd3.tga 0 MUGblnSwrd3_HA.tga
		ExcludeSubobjects 	= Forged_Blade
		;RecolorHouse		=   Yes		
	End
	
	Behavior = ArmorUpgrade WildModuleArmorUpgrade
		TriggeredBy		=	Upgrade_WildHeavyArmor
		;ArmorSetFlag	=	PLAYER_UPGRADE
	End

	Behavior = ModelConditionUpgrade WildModuleArmorVisualUpgrade
		TriggeredBy			= Upgrade_WildHeavyArmor
		RequiresAllTriggers		= Yes
		AddConditionFlags		= CREATE_A_HERO_00 ;; = The New HA
	End	
	
; ------------------------------------------------------------------------------ POISONED BLADES

	Behavior = WeaponSetUpgrade WeaponSetUpgradeVenomSacks //WeaponSetUpgradeModuleTag
		TriggeredBy				= Upgrade_WildSpiderVenomSacks
		CustomAnimAndDuration	= AnimState:USER_1 AnimTime:0
	End
	
; ------------------------------------------------------------------------------

	; Moria Scurry!
	Behavior = AttributeModifierUpgrade ModuleTag_ScurryBonus
		TriggeredBy = Upgrade_MoriaScurry
		AttributeModifier = SpellBookMoriaScurry
	End
    
  Geometry				= CYLINDER
  GeometryMajorRadius		= 8.0
  GeometryMinorRadius		= 8.0
  GeometryHeight			= 19.2
  GeometryIsSmall			= Yes
  
  Shadow				= SHADOW_DECAL
  ShadowSizeX			= 11
  ShadowSizeY			= 11
  ShadowTexture			= ShadowI
End
